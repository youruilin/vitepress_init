import{_ as i,c as a,o as n,ae as p}from"./chunks/framework._lwO82Iq.js";const t="/vitepress_init/assets/image-vantWeapp.qFBSyo0-.png",l="/vitepress_init/assets/image-%E6%9E%84%E5%BB%BAnpm.D_KfH0s9.png",h="/vitepress_init/assets/image-%E5%85%A8%E5%B1%80%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB.QsvAH8bV.png",k="/vitepress_init/assets/image-store.Ba12N80T.png",F=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"articles/01-é¡¹ç›®åˆ›å»º/02-å°ç¨‹åº/05-ä½¿ç”¨npmåŒ….md","filePath":"articles/01-é¡¹ç›®åˆ›å»º/02-å°ç¨‹åº/05-ä½¿ç”¨npmåŒ….md"}'),e={name:"articles/01-é¡¹ç›®åˆ›å»º/02-å°ç¨‹åº/05-ä½¿ç”¨npmåŒ….md"};function E(r,s,d,g,o,y){return n(),a("div",null,s[0]||(s[0]=[p('<h2 id="vant-weapp" tabindex="-1">Vant Weapp <a class="header-anchor" href="#vant-weapp" aria-label="Permalink to &quot;Vant Weapp&quot;">â€‹</a></h2><h3 id="å°ç¨‹åºå¯¹-npm-çš„æ”¯æŒä¸é™åˆ¶" tabindex="-1">å°ç¨‹åºå¯¹ npm çš„æ”¯æŒä¸é™åˆ¶ <a class="header-anchor" href="#å°ç¨‹åºå¯¹-npm-çš„æ”¯æŒä¸é™åˆ¶" aria-label="Permalink to &quot;å°ç¨‹åºå¯¹ npm çš„æ”¯æŒä¸é™åˆ¶&quot;">â€‹</a></h3><p>å°ç¨‹åºä¸­å·²ç»æ”¯æŒä½¿ç”¨npm å®‰è£…ç¬¬ä¸‰æ–¹åŒ…ï¼Œä»è€Œæ¥æé«˜å°ç¨‹åºçš„å¼€å‘æ•ˆç‡ã€‚ä½†æ˜¯ï¼Œåœ¨å°ç¨‹åºä¸­ä½¿ç”¨npm åŒ…æœ‰å¦‚ä¸‹ 3 ä¸ªé™åˆ¶ï¼š</p><p>â‘  ä¸æ”¯æŒä¾èµ–äº Node.js å†…ç½®åº“ çš„åŒ…</p><p>â‘¡ ä¸æ”¯æŒä¾èµ–äº æµè§ˆå™¨å†…ç½®å¯¹è±¡ çš„åŒ…</p><p>â‘¢ ä¸æ”¯æŒä¾èµ–äº C++ æ’ä»¶ çš„åŒ…</p><p>æ€»ç»“ï¼šè™½ç„¶ npm ä¸Šçš„åŒ…æœ‰åƒåƒä¸‡ï¼Œä½†æ˜¯èƒ½ä¾›å°ç¨‹åºä½¿ç”¨çš„åŒ…å´â€œä¸ºæ•°ä¸å¤šâ€ã€‚</p><h3 id="vant-weapp-1" tabindex="-1">Vant Weapp <a class="header-anchor" href="#vant-weapp-1" aria-label="Permalink to &quot;Vant  Weapp&quot;">â€‹</a></h3><p>Vant Weappæ˜¯æœ‰èµå‰ç«¯å›¢é˜Ÿå¼€æºçš„ä¸€å¥— å°ç¨‹åº UI ç»„ä»¶åº“ ï¼ŒåŠ©åŠ›å¼€å‘è€…å¿«é€Ÿæ­å»ºå°ç¨‹åºåº”ç”¨ã€‚å®ƒæ‰€ä½¿ç”¨çš„æ˜¯MIT å¼€æºè®¸å¯åè®® ï¼Œå¯¹å•†ä¸šä½¿ç”¨æ¯”è¾ƒå‹å¥½ã€‚</p><p>å®˜æ–¹æ–‡æ¡£åœ°å€ <a href="https://youzan.github.io/vant" target="_blank" rel="noreferrer">https://youzan.github.io/vant</a> vant-weapp</p><p><img src="'+t+`" alt="image-20250729113720700"></p><h3 id="å®‰è£…-vant-ç»„ä»¶åº“" tabindex="-1">å®‰è£… Vant ç»„ä»¶åº“ <a class="header-anchor" href="#å®‰è£…-vant-ç»„ä»¶åº“" aria-label="Permalink to &quot;å®‰è£… Vant ç»„ä»¶åº“&quot;">â€‹</a></h3><p>åœ¨å°ç¨‹åºé¡¹ç›®ä¸­ï¼Œå®‰è£… Vant ç»„ä»¶åº“ä¸»è¦åˆ†ä¸ºå¦‚ä¸‹ 3 æ­¥ï¼š</p><p>â‘  é€šè¿‡ npm å®‰è£…</p><p>â‘¡ æ„å»º npm åŒ…</p><p>â‘¢ ä¿®æ”¹ app.json</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># åˆå§‹åŒ–é¡¹ç›®</span></span>
<span class="line"><span>npm init -y</span></span>
<span class="line"><span></span></span>
<span class="line"><span># é€šè¿‡ npm å®‰è£…</span></span>
<span class="line"><span>npm i @vant/weapp -S --production</span></span>
<span class="line"><span></span></span>
<span class="line"><span># é€šè¿‡ yarn å®‰è£…</span></span>
<span class="line"><span>yarn add @vant/weapp --production</span></span></code></pre></div><p>ç„¶åï¼Œä¿®æ”¹ app.jsonï¼š</p><p>å°† app.json ä¸­çš„ <code>&quot;style&quot;: &quot;v2&quot;</code> å»é™¤ï¼Œå°ç¨‹åºçš„<a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#style" target="_blank" rel="noreferrer">æ–°ç‰ˆåŸºç¡€ç»„ä»¶</a>å¼ºè¡ŒåŠ ä¸Šäº†è®¸å¤šæ ·å¼ï¼Œéš¾ä»¥è¦†ç›–ï¼Œä¸å…³é—­å°†é€ æˆéƒ¨åˆ†ç»„ä»¶æ ·å¼æ··ä¹±ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæ„å»º npm åŒ…ï¼š</p><p>æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œç‚¹å‡» <strong>å·¥å…· -&gt; æ„å»º npm</strong>ï¼Œå¹¶å‹¾é€‰ <strong>ä½¿ç”¨ npm æ¨¡å—</strong> é€‰é¡¹ï¼Œæ„å»ºå®Œæˆåï¼Œå³å¯å¼•å…¥ç»„ä»¶ã€‚</p><p><img src="`+l+`" alt="img"></p><p>::: detials typescript æ”¯æŒï¼š</p><p>å¦‚æœä½¿ç”¨ typescript å¼€å‘å°ç¨‹åºï¼Œè¿˜éœ€è¦åšå¦‚ä¸‹æ“ä½œï¼Œä»¥è·å¾—é¡ºç•…çš„å¼€å‘ä½“éªŒã€‚</p><p>å®‰è£… miniprogram-api-typings</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é€šè¿‡ npm å®‰è£…</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> miniprogram-api-typings</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é€šè¿‡ yarn å®‰è£…</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> miniprogram-api-typings</span></span></code></pre></div><p>åœ¨ tsconfig.json ä¸­å¢åŠ å¦‚ä¸‹é…ç½®ï¼Œä»¥é˜²æ­¢ tsc ç¼–è¯‘æŠ¥é”™ã€‚</p><p>è¯·å°†<code>path/to/node_modules/@vant/weapp</code>ä¿®æ”¹ä¸ºé¡¹ç›®çš„ <code>node_modules</code> ä¸­ @vant/weapp æ‰€åœ¨çš„ç›®å½•ã€‚</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">  ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">    ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;baseUrl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;miniprogram-api-typings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;paths&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;@vant/weapp/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;path/to/node_modules/@vant/weapp/dist/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;lib&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ES6&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>:::</p><h3 id="ä½¿ç”¨-vant-ç»„ä»¶" tabindex="-1">ä½¿ç”¨ Vant ç»„ä»¶ <a class="header-anchor" href="#ä½¿ç”¨-vant-ç»„ä»¶" aria-label="Permalink to &quot;ä½¿ç”¨ Vant  ç»„ä»¶&quot;">â€‹</a></h3><p>å®‰è£…å®Œ Vant ç»„ä»¶åº“ä¹‹åï¼Œå¯ä»¥åœ¨ app.json çš„ usingComponents èŠ‚ç‚¹ä¸­å¼•å…¥éœ€è¦çš„ç»„ä»¶ï¼Œå³å¯åœ¨ wxml ä¸­ ç›´æ¥ä½¿ç”¨ç»„ä»¶ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// app.json</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  &quot;usingComponents&quot;: {</span></span>
<span class="line"><span>    &quot;van-button&quot;: &quot;@vant/weapp/button/index&quot;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;!-- é¡µé¢çš„ .wxml ç»“æ„ --&gt;</span></span>
<span class="line"><span>&lt;van-button type=&quot;primary&quot;&gt;æŒ‰é’®&lt;/van-button&gt;</span></span></code></pre></div><h3 id="å®šåˆ¶å…¨å±€åŸºç¡€æ ·å¼" tabindex="-1">å®šåˆ¶å…¨å±€åŸºç¡€æ ·å¼ <a class="header-anchor" href="#å®šåˆ¶å…¨å±€åŸºç¡€æ ·å¼" aria-label="Permalink to &quot;å®šåˆ¶å…¨å±€åŸºç¡€æ ·å¼&quot;">â€‹</a></h3><p>Vant Weapp ä½¿ç”¨ CSS å˜é‡ æ¥å®ç°å®šåˆ¶ä¸»é¢˜ã€‚ å…³äº CSS å˜é‡çš„åŸºæœ¬ç”¨æ³•ï¼Œè¯·å‚è€ƒ MDN æ–‡æ¡£ï¼š <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Using_CSS_custom_properties" target="_blank" rel="noreferrer">https://developer.mozilla.org/zh-CN/docs/Web/CSS/Using_CSS_custom_properties</a></p><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.box1</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> .box2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	background-color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">#c00000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.box3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">#c00000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>vs</p><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /* å®šä¹‰ css å˜é‡ */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> --main-color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">#c00000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.box1</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> .box2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	background-color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">--main-color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.box3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">--main-color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>å…¶ä¸­ï¼Œå®šä¹‰ css å˜é‡æ˜¯æœ‰ä½œç”¨åŸŸé™åˆ¶çš„ï¼Œå…¨å±€ç”Ÿæ•ˆï¼Œéœ€è¦åœ¨æ ¹èŠ‚ç‚¹å®šä¹‰ã€‚</p><h3 id="å®šåˆ¶å…¨å±€ä¸»é¢˜æ ·å¼" tabindex="-1">å®šåˆ¶å…¨å±€ä¸»é¢˜æ ·å¼ <a class="header-anchor" href="#å®šåˆ¶å…¨å±€ä¸»é¢˜æ ·å¼" aria-label="Permalink to &quot;å®šåˆ¶å…¨å±€ä¸»é¢˜æ ·å¼&quot;">â€‹</a></h3><p>åœ¨ app.wxss ä¸­ï¼Œå†™å…¥ CSS å˜é‡ï¼š</p><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* app.wxss */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">page {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* å®šåˆ¶è­¦å‘ŠæŒ‰é’®çš„èƒŒæ™¯é¢œè‰²å’Œè¾¹æ¡†é¢œè‰² */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  --button-danger-background-color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">#C00000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  --button-danger-border-color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">#D60000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="api-promise-åŒ–" tabindex="-1">API Promise åŒ– <a class="header-anchor" href="#api-promise-åŒ–" aria-label="Permalink to &quot;API Promise åŒ–&quot;">â€‹</a></h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå°ç¨‹åºå®˜æ–¹æä¾›çš„å¼‚æ­¥ API éƒ½æ˜¯ åŸºäºå›è°ƒå‡½æ•° å®ç°çš„ï¼Œä¾‹å¦‚ï¼Œç½‘ç»œè¯·æ±‚çš„ API éœ€è¦æŒ‰ç…§å¦‚ä¸‹çš„æ–¹å¼ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  data: { },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { }, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¯·æ±‚æˆåŠŸçš„å›è°ƒå‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { }, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¯·æ±‚å¤±è´¥çš„å›è°ƒå‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  complete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { } </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¯·æ±‚å®Œæˆçš„å›è°ƒå‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>ç¼ºç‚¹ï¼šå®¹æ˜“é€ æˆå›è°ƒåœ°ç‹± çš„é—®é¢˜ï¼Œä»£ç çš„å¯è¯»æ€§ã€ç»´æŠ¤æ€§å·®ï¼</p><details class="details custom-block"><summary>å›è°ƒå‡½æ•°åœ°ç‹±</summary><p>â€œå›è°ƒåœ°ç‹±â€ï¼ˆCallback Hellï¼‰ï¼Œä¹Ÿå«â€œå›è°ƒå‡½æ•°åœ°ç‹±â€ï¼Œæ˜¯æŒ‡åœ¨å¼‚æ­¥ç¼–ç¨‹ä¸­ï¼Œå›è°ƒå‡½æ•°åµŒå¥—è¿‡å¤šå¯¼è‡´ä»£ç ç»“æ„æ··ä¹±ã€éš¾ä»¥ç»´æŠ¤çš„é—®é¢˜ã€‚</p><hr><p>ğŸ”§ ä¸ºä»€ä¹ˆä¼šå‡ºç°å›è°ƒåœ°ç‹±ï¼Ÿ</p><p>åœ¨ JavaScriptï¼ˆç‰¹åˆ«æ˜¯æ—©æœŸ Node.js å¼€å‘ï¼‰ä¸­ï¼Œå¤„ç†å¼‚æ­¥æ“ä½œå¸¸å¸¸ä¾èµ–å›è°ƒå‡½æ•°ï¼Œä¾‹å¦‚è¯»å–æ–‡ä»¶ã€è®¿é—®æ•°æ®åº“ã€å‘èµ·ç½‘ç»œè¯·æ±‚ç­‰ã€‚è¿™äº›å¼‚æ­¥æ“ä½œä¸€å±‚åµŒå¥—ä¸€å±‚ï¼Œå¾ˆå¿«å°±ä¼šå˜æˆâ€œåœ°ç‹±å¼â€ç»“æ„ã€‚</p><hr><p>ğŸ˜– ç¤ºä¾‹ï¼šå…¸å‹çš„å›è°ƒåœ°ç‹±ä»£ç </p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;c.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åˆå¹¶å†…å®¹:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data3);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>ğŸ”» é—®é¢˜ï¼š</p><ul><li>å±‚å±‚åµŒå¥—ï¼Œéš¾ä»¥é˜…è¯»å’Œç»´æŠ¤</li><li>é”™è¯¯å¤„ç†åˆ†æ•£ï¼Œæ¯ä¸€å±‚éƒ½å¾—åˆ¤æ–­ <code>err</code></li><li>æ²¡æœ‰æ˜æ˜¾çš„æµç¨‹ç»“æ„ï¼ˆåƒâ€œåœ£è¯æ ‘â€ä¸€æ ·å‘å³ç¼©è¿›ï¼‰</li></ul><p>ğŸ¯ åœºæ™¯è®¾å®š</p><p>æˆ‘ä»¬æœ‰ä¸‰ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼š<code>a.txt</code>, <code>b.txt</code>, <code>c.txt</code>ï¼Œæˆ‘ä»¬è¦<strong>ä¾æ¬¡è¯»å–è¿™ä¸‰ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œå¹¶æŠŠå®ƒä»¬æ‹¼æ¥è¾“å‡º</strong>ã€‚</p><hr><p>ğŸ’¥ åŸå§‹çš„å›è°ƒåœ°ç‹±ä»£ç </p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;c.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åˆå¹¶å†…å®¹:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data3);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><hr><p>ğŸ§  é€æ­¥æ‹†è§£è§£é‡Š</p><p>ç¬¬ä¸€æ­¥ï¼šè¯»å– a.txt</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>fs.readFile(&#39;a.txt&#39;, &#39;utf8&#39;, (err, data1) =&gt; {</span></span>
<span class="line"><span>  if (err) return console.error(err);</span></span>
<span class="line"><span>  // ä¸‹ä¸€æ­¥è¯»å– b.txt</span></span>
<span class="line"><span>});</span></span></code></pre></div><p>è¿™è¡¨ç¤ºï¼šâ€œè¯»å– <code>a.txt</code> æˆåŠŸåï¼Œå†è¿›è¡Œä¸‹ä¸€æ­¥â€ã€‚</p><hr><p>ç¬¬äºŒæ­¥ï¼šåµŒå¥—åœ°è¯»å– b.txt</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>fs.readFile(&#39;b.txt&#39;, &#39;utf8&#39;, (err, data2) =&gt; {</span></span>
<span class="line"><span>  if (err) return console.error(err);</span></span>
<span class="line"><span>  // ä¸‹ä¸€æ­¥è¯»å– c.txt</span></span>
<span class="line"><span>});</span></span></code></pre></div><p>è¿™ä¸ªè¯»å–æ“ä½œ<strong>å¿…é¡»å†™åœ¨ a.txt çš„å›è°ƒå‡½æ•°é‡Œé¢</strong>ï¼Œå¦åˆ™ä½ ä¸èƒ½ä¿è¯è¯»å–é¡ºåºã€‚</p><hr><p>ç¬¬ä¸‰æ­¥ï¼šåµŒå¥—åœ°è¯»å– c.txt</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>fs.readFile(&#39;c.txt&#39;, &#39;utf8&#39;, (err, data3) =&gt; {</span></span>
<span class="line"><span>  if (err) return console.error(err);</span></span>
<span class="line"><span>  console.log(&#39;åˆå¹¶å†…å®¹:&#39;, data1 + data2 + data3);</span></span>
<span class="line"><span>});</span></span></code></pre></div><p>è¿™åˆæ˜¯ <strong>åµŒå¥—åœ¨ b.txt çš„å›è°ƒé‡Œé¢</strong>ï¼Œå®Œæˆæ‰€æœ‰è¯»å–åï¼Œæ‰æ‰“å°æœ€ç»ˆç»“æœã€‚</p><hr><p>â—é—®é¢˜åœ¨å“ªï¼Ÿ</p><p>çœ‹èµ·æ¥é€»è¾‘æ²¡é”™ï¼Œä½†ä»£ç å˜æˆäº†è¿™æ ·ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>fs.readFile(..., () =&gt; {</span></span>
<span class="line"><span>  fs.readFile(..., () =&gt; {</span></span>
<span class="line"><span>    fs.readFile(..., () =&gt; {</span></span>
<span class="line"><span>      // çœŸæ­£çš„é€»è¾‘åœ¨è¿™é‡Œ</span></span>
<span class="line"><span>    });</span></span>
<span class="line"><span>  });</span></span>
<span class="line"><span>});</span></span></code></pre></div><p>è¿™å°±æ˜¯æ‰€è°“çš„ã€Œå›è°ƒåœ°ç‹±ã€ï¼š</p><ul><li>æ¯ä¸€æ­¥éƒ½å†™åœ¨å‰ä¸€æ­¥çš„å›è°ƒé‡Œé¢</li><li>å‘å³ç¼©è¿›ä¸€å±‚ä¸€å±‚ä¸€å±‚â€¦â€¦åƒã€Œåœ£è¯æ ‘ã€</li><li>é”™è¯¯å¤„ç†ä¹Ÿé‡å¤å†™</li><li>ä¸€æ—¦æœ‰ 5~6 å±‚åµŒå¥—ï¼Œä»£ç å‡ ä¹ä¸å¯è¯»</li></ul></details><h3 id="api-promise-åŒ–-1" tabindex="-1">Api promise åŒ– <a class="header-anchor" href="#api-promise-åŒ–-1" aria-label="Permalink to &quot;Api promise åŒ–&quot;">â€‹</a></h3><p>API PromiseåŒ–ï¼ŒæŒ‡çš„æ˜¯é€šè¿‡é¢å¤–çš„é…ç½®ï¼Œå°†å®˜æ–¹æä¾›çš„ã€åŸºäºå›è°ƒå‡½æ•°çš„å¼‚æ­¥ APIï¼Œå‡çº§æ”¹é€ ä¸ºåŸºäºPromiseçš„å¼‚æ­¥APIï¼Œä»è€Œæé«˜ä»£ç çš„å¯è¯»æ€§ã€ç»´æŠ¤æ€§ï¼Œé¿å…å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> miniprogram-api-promise</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åœ¨å°ç¨‹åºå…¥å£æ–‡ä»¶ä¸­(app.js), åªéœ€è°ƒç”¨ä¸€æ¬¡ promisifyAll() æ–¹æ³•,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å³å¯å®ç°å¼‚æ­¥ API çš„ Promise åŒ–</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { promisifyAll } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;miniprogram-api-promise&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¯¹è±¡æ˜¯å¼•ç”¨ç±»å‹æ•°æ®ï¼ŒæŒ‡å‘åŒä¸€ä¸ªç©ºå¯¹è±¡ = æŒ‡å‘åŒä¸€ä»½å†…å­˜</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> wxp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> wx.p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// promisify all wx&#39;s api</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">promisifyAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(wx, wxp)</span></span></code></pre></div><p>å®ƒçš„ä½œç”¨æ˜¯ï¼š ğŸ‘‰ **æŠŠ wx å¯¹è±¡é‡Œçš„æ‰€æœ‰å¼‚æ­¥ API åŒ…è£…æˆ Promise é£æ ¼ï¼Œå¹¶æŒ‚è½½åˆ° wxp ä¸Šï¼Œ<code>wxp</code> å’Œ <code>wx.p</code> éƒ½å¯ä»¥ä½¿ç”¨ **</p><h3 id="è°ƒç”¨-promise-ä¼˜åŒ–åçš„çš„-api" tabindex="-1">è°ƒç”¨ Promise ä¼˜åŒ–åçš„çš„ api <a class="header-anchor" href="#è°ƒç”¨-promise-ä¼˜åŒ–åçš„çš„-api" aria-label="Permalink to &quot;è°ƒç”¨ Promise ä¼˜åŒ–åçš„çš„ api&quot;">â€‹</a></h3><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// é¡µé¢çš„ .wxml ç»“æ„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">van-button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;danger&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bindtap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;getInfo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;vantæŒ‰é’®&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">van-button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// åœ¨é¡µé¢çš„.js æ–‡ä»¶ä¸­, å®šä¹‰å¯¹åº”çš„ tap äº‹ä»¶å¤„ç†å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">async getInfo() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  const { data: res } = await wx.p.request({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    method: &#39;GET&#39;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    url: &#39;https://www.esccook.cn/api/get&#39;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    data: { name: &#39;zs&#39;, age: 20 }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.log(res)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><h2 id="å…¨å±€æ•°æ®å…±äº«" tabindex="-1">å…¨å±€æ•°æ®å…±äº« <a class="header-anchor" href="#å…¨å±€æ•°æ®å…±äº«" aria-label="Permalink to &quot;å…¨å±€æ•°æ®å…±äº«&quot;">â€‹</a></h2><p>å…¨å±€æ•°æ®å…±äº« ï¼ˆåˆå«åšï¼šçŠ¶æ€ç®¡ç†ï¼‰æ˜¯ä¸ºäº†è§£å†³ ç»„ä»¶ä¹‹é—´æ•°æ®å…±äº« çš„é—®é¢˜ã€‚å¼€å‘ä¸­å¸¸ç”¨çš„å…¨å±€æ•°æ®å…±äº«æ–¹æ¡ˆæœ‰ï¼šVuex ã€Redux ã€MobX ç­‰ï¼š</p><p><img src="`+h+'" alt="image-20250804233623835"></p><h3 id="å°ç¨‹åºä¸­çš„å…¨å±€æ•°æ®å…±äº«æ–¹æ¡ˆ" tabindex="-1">å°ç¨‹åºä¸­çš„å…¨å±€æ•°æ®å…±äº«æ–¹æ¡ˆ <a class="header-anchor" href="#å°ç¨‹åºä¸­çš„å…¨å±€æ•°æ®å…±äº«æ–¹æ¡ˆ" aria-label="Permalink to &quot;å°ç¨‹åºä¸­çš„å…¨å±€æ•°æ®å…±äº«æ–¹æ¡ˆ&quot;">â€‹</a></h3><p>åœ¨å°ç¨‹åºä¸­ï¼Œå¯ä½¿ç”¨ mobxmobx-miniprogram é…åˆ mobxmobx-miniprogramminiprogram-bindings å®ç°å…¨å±€æ•°æ®å…±äº«ã€‚å…¶ä¸­ï¼š</p><ul><li>mobxmobx-miniprogram ç”¨æ¥ åˆ›å»º Store å®ä¾‹å¯¹è±¡</li><li>mobxmobx-miniprogramminiprogram-bindings ç”¨æ¥ æŠŠ Store ä¸­çš„å…±äº«æ•°æ®æˆ–æ–¹æ³• ï¼Œç»‘å®šåˆ°ç»„ä»¶æˆ–é¡µé¢ä¸­ä½¿ç”¨</li></ul><p><img src="'+k+`" alt="image-20250804233926050"></p><h3 id="å®‰è£…mobxç›¸å…³çš„åŒ…" tabindex="-1">å®‰è£…MobXç›¸å…³çš„åŒ… <a class="header-anchor" href="#å®‰è£…mobxç›¸å…³çš„åŒ…" aria-label="Permalink to &quot;å®‰è£…MobXç›¸å…³çš„åŒ…&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm i --save mobx-miniprogram mobx-miniprogram-bindings</span></span></code></pre></div><p>æ³¨æ„ï¼š MobX ç›¸å…³çš„åŒ…å®‰è£…å®Œæ¯•ä¹‹åï¼Œè®°å¾—åˆ é™¤ miniprogram_npm ç›®å½•åï¼Œé‡æ–°æ„å»º npmã€‚</p><h3 id="åˆ›å»º-mobx-çš„-store-å®ä¾‹" tabindex="-1">åˆ›å»º Mobx çš„ store å®ä¾‹ <a class="header-anchor" href="#åˆ›å»º-mobx-çš„-store-å®ä¾‹" aria-label="Permalink to &quot;åˆ›å»º Mobx çš„ store å®ä¾‹&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// /utils/store.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { observable, action } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;mobx-miniprogram&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> store</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> observable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æ•°æ®å­—æ®µ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  numA: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  numB: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // è®¡ç®—å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  get</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.numA </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.numB</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // actions æ–¹æ³•,ç”¨æ¥ä¿®æ”¹ store ä¸­çš„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  updateNum1: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.numA </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> step</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  updateNum2: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.numB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> step</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="ç»‘å®šåˆ°é¡µé¢-ä½¿ç”¨" tabindex="-1">ç»‘å®šåˆ°é¡µé¢&amp;ä½¿ç”¨ <a class="header-anchor" href="#ç»‘å®šåˆ°é¡µé¢-ä½¿ç”¨" aria-label="Permalink to &quot;ç»‘å®šåˆ°é¡µé¢&amp;ä½¿ç”¨&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é¡µé¢çš„ .js æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createStoreBindings } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;mobx-miniprogram-bindings&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { store } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../../store/store&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Page</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  onLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.storeBindings </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createStoreBindings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      store,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      fields: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;numA&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;numB&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;sum&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      actions: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;updateNum1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  onUnload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢å¸è½½</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.storeBindings.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">destroyStoreBindings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// é¡µé¢çš„ .wxml ç»“æ„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{{numA}} + {{numB}} = {{sum}}&lt;/</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">van-button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;primary&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bindtap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;btnHandler1&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> data-step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{1}}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">numA + 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">van-button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">van-button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;danger&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bindtap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;btnHandler1&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> data-step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{-1}}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">numA - 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">van-button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// æŒ‰é’® tap äº‹ä»¶çš„å¤„ç†å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">btnHandler1(e) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    this.updateNum1(e.target.dataset.step)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="ç»‘å®šåˆ°ç»„ä»¶ä¸­-ä½¿ç”¨" tabindex="-1">ç»‘å®šåˆ°ç»„ä»¶ä¸­&amp;ä½¿ç”¨ <a class="header-anchor" href="#ç»‘å®šåˆ°ç»„ä»¶ä¸­-ä½¿ç”¨" aria-label="Permalink to &quot;ç»‘å®šåˆ°ç»„ä»¶ä¸­&amp;ä½¿ç”¨&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç»„ä»¶jsæ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { storeBindingsBehavior } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;mobx-miniprogram-bindings&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { store } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../../store/store&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  behaviors: [storeBindingsBehavior], </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é€šè¿‡ storeBindingsBehavior æ¥å®ç°è‡ªåŠ¨ç»‘å®š</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  storeBindings: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    store, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŒ‡å®šè¦ç»‘å®šçš„ Store</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fields: { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŒ‡å®šè¦ç»‘å®šçš„å­—æ®µæ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      numA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.numA, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç»‘å®šå­—æ®µçš„ç¬¬ 1 ç§æ–¹å¼</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      numB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">store</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.numB, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç»‘å®šå­—æ®µçš„ç¬¬ 2 ç§æ–¹å¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      sum: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;sum&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // ç»‘å®šå­—æ®µçš„ç¬¬ 3 ç§æ–¹å¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    actions: { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŒ‡å®šè¦ç»‘å®šçš„æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      updateNum2: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;updateNum2&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// ç»„ä»¶çš„ .wxml ç»“æ„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{{numA}} + {{numB}} = {{sum}}&lt;/</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">van-button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;primary&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bindtap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;btnHandler2&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> data-step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{1}}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">numB + 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">van-button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">van-button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;danger&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bindtap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;btnHandler2&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> data-step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{-1}}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">numB - 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">van-button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">methods: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  btnHandler2(e) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    this.updateNum2(e.target.dataset.step)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><details class="details custom-block"><summary>äº‹ä»¶å¯¹è±¡ <code>e</code> æ˜¯ä»€ä¹ˆï¼Ÿ</summary><p>å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œä¼šè§¦å‘ <code>bindtap=&quot;btnHandler2&quot;</code> ç»‘å®šçš„æ–¹æ³• <code>btnHandler2</code>ï¼Œå¹¶ä¸”å°ç¨‹åºä¼šå°†ä¸€ä¸ª <strong>äº‹ä»¶å¯¹è±¡ <code>e</code></strong> ä¼ é€’ç»™è¿™ä¸ªæ–¹æ³•ã€‚</p><p>è¿™ä¸ªäº‹ä»¶å¯¹è±¡ <code>e</code> ä¸­åŒ…å«äº†å¾ˆå¤šä¿¡æ¯ï¼Œæ¯”å¦‚ï¼š</p><ul><li>è§¦å‘äº‹ä»¶çš„ DOM å…ƒç´ ï¼ˆæˆ–ç»„ä»¶å®ä¾‹ï¼‰ç›¸å…³ä¿¡æ¯</li><li>ç”¨æˆ·äº¤äº’çš„ç›¸å…³æ•°æ®</li><li>ä½ é€šè¿‡ <code>data-*</code> è‡ªå®šä¹‰å±æ€§ç»‘å®šçš„æ•°æ®</li></ul><hr><p><code>e.target.dataset.step</code> çš„å«ä¹‰ï¼š</p><ul><li><code>e.target</code>ï¼šæŒ‡çš„æ˜¯ <strong>è§¦å‘äº‹ä»¶çš„é‚£ä¸ªå…·ä½“å…ƒç´ èŠ‚ç‚¹</strong>ï¼Œåœ¨è¿™é‡Œå°±æ˜¯ä½ ç‚¹å‡»çš„é‚£ä¸ª <code>&lt;van-button&gt;</code> æŒ‰é’®ã€‚</li><li><code>.dataset</code>ï¼šæ˜¯å°ç¨‹åºæä¾›çš„ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥è·å–è¯¥å…ƒç´ ä¸Šæ‰€æœ‰ <code>data-*</code> è‡ªå®šä¹‰å±æ€§çš„å€¼ã€‚</li><li><code>.step</code>ï¼šæŒ‡çš„æ˜¯ <code>data-step</code> è¿™ä¸ªè‡ªå®šä¹‰å±æ€§å¯¹åº”çš„å€¼ã€‚</li></ul><p>æ‰€ä»¥ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>e.target.dataset.step</span></span></code></pre></div><p>è¡¨ç¤ºï¼š<strong>è·å–è§¦å‘äº‹ä»¶çš„å…ƒç´ ä¸Šï¼Œåä¸º data-step çš„è‡ªå®šä¹‰å±æ€§çš„å€¼</strong>ã€‚</p></details>`,73)]))}const u=i(e,[["render",E]]);export{F as __pageData,u as default};
