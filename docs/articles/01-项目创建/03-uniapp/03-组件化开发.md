# æ¨ªå‘æ»‘åŠ¨ç»„ä»¶

::: details - ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

/src/pages/index/components/videoList.vue

```vue
<script setup lang="ts">
import { ref } from 'vue'

// æ¨¡æ‹Ÿè§†é¢‘æ•°æ®
const videoList = ref([
  { src: '', zhanwei: '/static/images/videolist/video1.png' },
  { src: '', zhanwei: '/static/images/videolist/video2.png' },
  { src: '', zhanwei: '/static/images/videolist/video1.png' },
  { src: '', zhanwei: '/static/images/videolist/video1.png' },
])

// eslint-disable-next-line @typescript-eslint/no-explicit-any
const scroll = (e: any) => {
  console.log('æ»šåŠ¨ä¸­', e)
}
</script>

<template>
  <scroll-view
    class="scroll-view"
    :scroll-x="true"
    @scroll="scroll"
    scroll-left="120"
    :show-scrollbar="false"
  >
    <view
      v-for="(item, index) in videoList"
      :key="index"
      class="scroll-view-item"
    >
      <!-- æœ‰è§†é¢‘æºæ—¶æ˜¾ç¤ºè§†é¢‘ -->
      <video
        v-if="item.src"
        :src="item.src"
        class="video-item"
        :enable-play-gesture="true"
      ></video>
      <!-- æ— è§†é¢‘æºæ—¶æ˜¾ç¤ºå ä½å›¾ -->
      <image
        v-else
        :src="item.zhanwei ? item.zhanwei : ''"
        class="placeholder-image"
        mode="aspectFill"
      ></image>
    </view>
  </scroll-view>
</template>

<style scoped lang="scss">
.scroll-view {
  white-space: nowrap;
  width: 100%;
  padding: 30rpx; // åŒæ—¶è®¾ç½®äº†ä¸Šä¸‹å·¦å³å†…è¾¹è·ï¼Œç›¸å½“äºæ»šåŠ¨å…ƒç´ çš„å›ºå®šçˆ¶ç›’å­

  .scroll-view-item {
    display: inline-block;
    width: 250rpx;
    height: 170rpx;
    border-radius: 16rpx;
    padding-right: 20rpx;
    overflow: hidden;
    position: relative;
    &:last-child {
      padding-right: 60rpx;
    }
  }
}

.video-item,
.placeholder-image {
  width: 100%;
  height: 100%;
  border-radius: 16rpx;
}
</style>
```

é€šè¿‡ç²¾å‡†è°ƒè¯•ï¼Œå‘ç°æ¨ªå‘æ»šåŠ¨å®¹å™¨å…¶å­å…ƒç´ é›†ä¸­çš„paddingæ ·å¼ï¼Œä»…å¯¹å…ƒç´ é›†çš„å…¶å®å…ƒç´ å·¦ä¾§ç”Ÿæ•ˆï¼›

é—®é¢˜ä¸åœ¨äº `padding` æˆ– `margin` çš„é€‰æ‹©ï¼Œè€Œåœ¨äº**æ»šåŠ¨å®¹å™¨çš„è§†å£è¾¹ç•Œè®¡ç®—æœºåˆ¶**ï¼š

- æ»šåŠ¨å®¹å™¨çš„**æ»šåŠ¨è¾¹ç•Œ**æ˜¯åŸºäº**å†…å®¹è¾¹ç•Œ**è®¡ç®—çš„
- ä»»ä½• `padding` æˆ– `margin` éƒ½åªæ˜¯åœ¨å®¹å™¨å¤–éƒ¨æˆ–å†…éƒ¨åˆ›å»ºç©ºé—´
- ä½†**æ»šåŠ¨åœæ­¢ä½ç½®**å§‹ç»ˆæ˜¯å†…å®¹è¾¹ç•Œå¯¹é½è§†å£è¾¹ç•Œ

```css
.scroll-view {
  white-space: nowrap;
  width: 100%;
  padding: 30rpx; // åŒæ—¶è®¾ç½®äº†ä¸Šä¸‹å·¦å³å†…è¾¹è·ï¼Œç›¸å½“äºæ»šåŠ¨å…ƒç´ çš„å›ºå®šçˆ¶ç›’å­
  .scroll-view-item {
    // å…¶ä»–æ ·å¼
    padding-right: 20rpx;
    &:last-child {
      padding-right: 60rpx;
    }
  }
}
```

- æ»šåŠ¨å®¹å™¨åªå…³å¿ƒ**å†…å®¹è¾¹ç•Œ**
- å¿…é¡»åœ¨**å†…å®¹å†…éƒ¨**æ‰©å±•ç©ºé—´æ‰èƒ½å½±å“æ»šåŠ¨è¾¹ç•Œ
- å¤–éƒ¨ç©ºé—´ï¼ˆmargin/paddingï¼‰åªå½±å“è§†è§‰å¸ƒå±€ï¼Œä¸å½±å“æ»šåŠ¨æœºåˆ¶

:::

# ç»„ä»¶æ ·å¼ä¸“å±å‘ä½

::: details ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

æ³ªçš„æ•™è®­ï¼Œåº”è¯¥è‡ªå·±åŠ¨æ‰‹ã€çº¯æ‰‹å†™å¸ƒå±€ï¼Œè¿™æ˜¯çœ‹èµ·æ¥æœ€ç¬¨ã€æœ€è€—æ—¶ï¼Œä½†æœ€é«˜æ•ˆï¼Œæœ€ç®€æ´çš„å¸ƒå±€æ–¹å¼ï¼ï¼

ä¾‹å¦‚é¡¹ç›®ä¸­æˆ‘çš„åœ°å—æ»‘åŠ¨ç»„ä»¶ï¼Œæ ·å¼å¸ƒå±€å¹¶ä¸å¤æ‚ï¼Œä¼ ç»Ÿçš„flexå¸ƒå±€å³å®Œå…¨å¯ä»¥èƒœä»»ï¼Œä½†deepseekéå¸¸å‚»é€¼çš„å»ºè®®ï¼Œå¯¼è‡´æˆ‘ä»…ä¿©å°æ—¶è€—è´¹åœ¨è¿™ä¸ªä¸Šé¢ï¼Œå¦åˆ™æœ€å¤šåŠå°æ—¶çº¯æ‰‹å†™å°±å¯ä»¥å®Œæˆï¼

:::

# å…¨å±€å®šä¹‰ä¸»é¢˜çŠ¶æ€

**å®ç°é€»è¾‘**

::: details - ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

åˆ›å»º styles/theme.scss

```scss
// styles/theme.scss

// ==================== ä¸»é¢˜ Mixin å®šä¹‰ ====================
@mixin light-theme {
  // èƒŒæ™¯è‰²ç³»ç»Ÿ
  --color-bg-page: #f5f7fa;
  --color-bg-card: #ffffff;
  --color-bg-navbar: linear-gradient(135deg, #03a9f0 20%, #0083fd 90%);
  --color-bg-transparent: rgba(255, 255, 255, 0.2);

  // æ–‡å­—è‰²ç³»ç»Ÿ
  --color-text-primary: #333333;
  --color-text-secondary: #666666;
  --color-text-tertiary: #999999;
  --color-text-white: #ffffff;

  // åŠŸèƒ½è‰²
  --color-success: #52c41a;
  --color-warning: #faad14;
  --color-error: #ff4d4f;
  --color-info: #1890ff;

  // è¾¹æ¡†
  --color-border: #e0e0e0;
  --color-divider: #f0f0f0;
}

@mixin dark-theme {
  --color-bg-page: #1a1a1a;
  --color-bg-card: #2d2d2d;
  --color-bg-navbar: linear-gradient(135deg, #2c3e50 20%, #34495e 90%);
  --color-bg-transparent: rgba(255, 255, 255, 0.1);

  --color-text-primary: #ffffff;
  --color-text-secondary: #cccccc;
  --color-text-tertiary: #999999;
  --color-text-white: #ffffff;

  --color-success: #49aa19;
  --color-warning: #d89614;
  --color-error: #a61d24;
  --color-info: #177ddc;

  --color-border: #444444;
  --color-divider: #333333;
}

@mixin dusk-theme {
  --color-bg-page: #fdf6e3;
  --color-bg-card: #fff9e6;
  --color-bg-navbar: linear-gradient(135deg, #e67e22 20%, #d35400 90%);
  --color-bg-transparent: rgba(255, 255, 255, 0.3);

  --color-text-primary: #8b4513;
  --color-text-secondary: #a0522d;
  --color-text-tertiary: #cd853f;
  --color-text-white: #ffffff;

  --color-success: #389e0d;
  --color-warning: #d46b08;
  --color-error: #a8071a;
  --color-info: #0958d9;

  --color-border: #e6b88a;
  --color-divider: #f5e6d3;
}

// ==================== é¡µé¢çº§ä¸»é¢˜ç±» ====================
.theme {
  // é»˜è®¤ä¸»é¢˜
  @include light-theme;

  // ä¸»é¢˜ç±»å
  &.light-mode {
    @include light-theme;
  }

  &.dark-mode {
    @include dark-theme;
  }

  &.dusk-mode {
    @include dusk-theme;
  }
}

// ==================== é€šç”¨æ ·å¼ç±» ====================
.text-primary {
  color: var(--color-text-primary) !important;
}

.text-secondary {
  color: var(--color-text-secondary) !important;
}

.text-tertiary {
  color: var(--color-text-tertiary) !important;
}

.text-white {
  color: var(--color-text-white) !important;
}

.text-success {
  color: var(--color-success) !important;
}

.text-warning {
  color: var(--color-warning) !important;
}

.text-error {
  color: var(--color-error) !important;
}

.text-info {
  color: var(--color-info) !important;
}

.bg-page {
  background-color: var(--color-bg-page) !important;
}

.bg-card {
  background-color: var(--color-bg-card) !important;
}

.bg-transparent {
  background-color: var(--color-bg-transparent) !important;
}

.border {
  border: 1rpx solid var(--color-border) !important;
}

.divider {
  background-color: var(--color-divider) !important;
}
```

åˆ›å»ºå…¨å±€ä¸»é¢˜çŠ¶æ€ç®¡ç† `stores/modules/theme.ts`

ç®€åŒ–ç‰ˆï¼š

```ts
// stores/modules/theme.ts
import { defineStore } from 'pinia'
import { ref } from 'vue'

export type ThemeMode = 'light-mode' | 'dusk-mode' | 'dark-mode'

export const useThemeStore = defineStore(
  'theme',
  () => {
    // å½“å‰ä¸»é¢˜
    const currentTheme = ref<ThemeMode>('light-mode')

    // æ ¹æ®æ—¶é—´è®¡ç®—ä¸»é¢˜
    const calculateThemeByTime = (): ThemeMode => {
      const hour = new Date().getHours()
      if (hour >= 18 || hour < 6) return 'dark-mode'
      if (hour >= 16 && hour < 18) return 'dusk-mode'
      return 'light-mode'
    }

    // è‡ªåŠ¨æ›´æ–°ä¸»é¢˜
    const updateThemeByTime = () => {
      currentTheme.value = calculateThemeByTime()
    }

    // æ‰‹åŠ¨è®¾ç½®ä¸»é¢˜
    const setTheme = (theme: ThemeMode) => {
      currentTheme.value = theme
    }

    // åˆ‡æ¢ä¸»é¢˜
    const toggleTheme = () => {
      const themes: ThemeMode[] = ['light-mode', 'dusk-mode', 'dark-mode']
      const currentIndex = themes.indexOf(currentTheme.value)
      const nextIndex = (currentIndex + 1) % themes.length
      currentTheme.value = themes[nextIndex] ?? 'light-mode'
    }

    return {
      currentTheme,
      updateThemeByTime,
      setTheme,
      toggleTheme,
      calculateThemeByTime,
    }
  },
  {
    persist: {
      key: 'theme-store',
      storage: {
        getItem(key) {
          return uni.getStorageSync(key)
        },
        setItem(key, value) {
          uni.setStorageSync(key, value)
        },
      },
    },
  },
)
```

::: details - åŸç‰ˆå¯¹æ¯”

```ts
// stores/theme.ts
import { defineStore } from 'pinia'
import { computed, onUnmounted, ref } from 'vue'

export type ThemeMode = 'light-mode' | 'dusk-mode' | 'dark-mode'
export type ThemeSource = 'auto' | 'manual'

export const useThemeStore = defineStore(
  'theme',
  () => {
    // çŠ¶æ€
    const currentTheme = ref<ThemeMode>('light-mode')
    const themeSource = ref<ThemeSource>('auto') // æ–°å¢ï¼šä¸»é¢˜æ¥æº
    let autoUpdateTimer: ReturnType<typeof setInterval> | null = null    // æ–°å¢ï¼šè‡ªåŠ¨æ›´æ–°å®šæ—¶å™¨

    // è®¡ç®—å±æ€§
    const isAutoMode = computed(() => themeSource.value === 'auto')
    const suggestedTheme = computed(() => calculateThemeByTime())

    // æ ¹æ®æ—¶é—´è®¡ç®—ä¸»é¢˜
    const calculateThemeByTime = (): ThemeMode => {
      const hour = new Date().getHours()
      if (hour >= 18 || hour < 6) return 'dark-mode'
      if (hour >= 16 && hour < 18) return 'dusk-mode'
      return 'light-mode'
    }

    // è‡ªåŠ¨æ›´æ–°ä¸»é¢˜
    const updateThemeByTime = () => {
      const newTheme = calculateThemeByTime()
      if (currentTheme.value !== newTheme) {
        currentTheme.value = newTheme
        console.log(`ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢ä¸º: ${newTheme}`)
      }
    }

    // æ‰‹åŠ¨è®¾ç½®ä¸»é¢˜ï¼ˆåˆ‡æ¢åˆ°æ‰‹åŠ¨æ¨¡å¼ï¼‰
    const setTheme = (theme: ThemeMode) => {
      currentTheme.value = theme
      themeSource.value = 'manual'
      stopAutoThemeUpdate() // åˆ‡æ¢åˆ°æ‰‹åŠ¨æ¨¡å¼æ—¶åœæ­¢è‡ªåŠ¨æ›´æ–°
      console.log(`ä¸»é¢˜æ‰‹åŠ¨è®¾ç½®ä¸º: ${theme}`)
    }

    // åˆ‡æ¢åˆ°è‡ªåŠ¨æ¨¡å¼
    const enableAutoTheme = () => {
      themeSource.value = 'auto'
      updateThemeByTime()
      startAutoThemeUpdate()
      console.log('å·²å¯ç”¨è‡ªåŠ¨ä¸»é¢˜åˆ‡æ¢')
    }

    // å¯åŠ¨è‡ªåŠ¨ä¸»é¢˜æ›´æ–°ï¼ˆæ™ºèƒ½å®šæ—¶ï¼‰
    const startAutoThemeUpdate = () => {
      stopAutoThemeUpdate() // å…ˆåœæ­¢ç°æœ‰å®šæ—¶å™¨

      // è®¡ç®—åˆ°ä¸‹ä¸€ä¸ªæ•´ç‚¹çš„å»¶è¿Ÿ
      const now = new Date()
      const nextHour = new Date(now)
      nextHour.setHours(now.getHours() + 1, 0, 0, 0)
      const delay = nextHour.getTime() - now.getTime()

      // è®¾ç½®å®šæ—¶å™¨
      setTimeout(() => {
        updateThemeByTime()
        // ä¹‹åæ¯å°æ—¶æ›´æ–°ä¸€æ¬¡
        autoUpdateTimer = setInterval(updateThemeByTime, 60 * 60 * 1000)
      }, delay)
    }

    // åœæ­¢è‡ªåŠ¨ä¸»é¢˜æ›´æ–°
    const stopAutoThemeUpdate = () => {
      if (autoUpdateTimer) {
        clearInterval(autoUpdateTimer)
        autoUpdateTimer = null
      }
    }

    // åˆ‡æ¢ä¸»é¢˜
    const toggleTheme = () => {
      const themes: ThemeMode[] = ['light-mode', 'dusk-mode', 'dark-mode']
      const currentIndex = themes.indexOf(currentTheme.value)
      const nextIndex = (currentIndex + 1) % themes.length
      setTheme(themes[nextIndex] ?? 'light-mode') // ä½¿ç”¨ setTheme æ¥ç¡®ä¿æ¨¡å¼åˆ‡æ¢
    }

    // åˆå§‹åŒ–ä¸»é¢˜ç³»ç»Ÿ
    const initializeTheme = () => {
      if (themeSource.value === 'auto') {
        startAutoThemeUpdate()
      }
    }

    // æ¸…ç†èµ„æº
    onUnmounted(() => {
      stopAutoThemeUpdate()
    })

    return {
      // çŠ¶æ€
      currentTheme,
      themeSource,
      // è®¡ç®—å±æ€§
      isAutoMode,
      suggestedTheme,
      // æ–¹æ³•
      setTheme,
      enableAutoTheme,
      updateThemeByTime,
      toggleTheme,
      initializeTheme,
      stopAutoThemeUpdate,
      calculateThemeByTime,
    }
  },
  {
    persist: {
      key: 'theme-store',
      storage: {
        getItem(key) {
          const value = uni.getStorageSync(key)
          return value ? JSON.parse(value) : null
        },
        setItem(key, value) {
          uni.setStorageSync(key, JSON.stringify(value))
        },
      },
    },
  },
)
```

åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½               | ç®€åŒ–ç‰ˆ       | å®Œæ•´ç‰ˆ        |
| :----------------- | :----------- | :------------ |
| **åŸºç¡€ä¸»é¢˜åˆ‡æ¢**   | âœ…            | âœ…             |
| **è‡ªåŠ¨æ—¶é—´è®¡ç®—**   | âœ…            | âœ…             |
| **æ‰‹åŠ¨/è‡ªåŠ¨æ¨¡å¼**  | âŒ            | âœ…             |
| **æ™ºèƒ½å®šæ—¶æ›´æ–°**   | âŒ            | âœ…ï¼ˆæ•´ç‚¹æ£€æŸ¥ï¼‰ |
| **æ¨¡å¼çŠ¶æ€æŒä¹…åŒ–** | âŒ            | âœ…             |
| **æ¨èä¸»é¢˜æç¤º**   | âŒ            | âœ…             |
| **èµ„æºè‡ªåŠ¨æ¸…ç†**   | âŒ            | âœ…             |
| **æ—¥å¿—è¾“å‡º**       | âŒ            | âœ…             |
| **æ€§èƒ½ä¼˜åŒ–**       | âš ï¸ æ¯åˆ†é’Ÿæ£€æŸ¥ | âœ… æ¯å°æ—¶æ£€æŸ¥  |

ä½¿ç”¨åœºæ™¯å»ºè®®

ä½¿ç”¨ç®€åŒ–ç‰ˆçš„æƒ…å†µï¼š

- å°å‹é¡¹ç›®
- å¯¹æ€§èƒ½è¦æ±‚ä¸é«˜
- ä¸éœ€è¦æ‰‹åŠ¨/è‡ªåŠ¨æ¨¡å¼åˆ‡æ¢
- å¼€å‘åŸå‹é˜¶æ®µ

ä½¿ç”¨å®Œæ•´ç‰ˆçš„æƒ…å†µï¼š

- ç”Ÿäº§ç¯å¢ƒé¡¹ç›®
- éœ€è¦ç²¾ç»†æ§åˆ¶ä¸»é¢˜è¡Œä¸º
- é‡è§†æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ
- éœ€è¦å®Œæ•´çš„ä¸»é¢˜ç®¡ç†åŠŸèƒ½

æ¨èé€‰æ‹©

**ä½ çš„ç®€åŒ–ç‰ˆå®Œå…¨å¤Ÿç”¨**ï¼Œå› ä¸ºï¼š

1. æ ¸å¿ƒåŠŸèƒ½é½å…¨
2. ä»£ç ç®€æ´æ˜“ç»´æŠ¤
3. æ»¡è¶³å¤§éƒ¨åˆ†ä¸šåŠ¡éœ€æ±‚
4. æ€§èƒ½å½±å“å¯ä»¥æ¥å—ï¼ˆæ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ï¼‰

åªæœ‰åœ¨éœ€è¦æ›´ç²¾ç»†çš„æ§åˆ¶æ—¶æ‰éœ€è¦å‡çº§åˆ°å®Œæ•´ç‰ˆã€‚ç®€åŒ–ç‰ˆæ˜¯å¾ˆå®ç”¨çš„è®¾è®¡ï¼ğŸ‘

:::

::: details - åæœŸä¼˜åŒ–æ–¹å‘

æ ¹æ®å½“åœ°æ—¥å‡ºæ—¥è½æ—¶é—´ï¼Œæ¥ç²¾å‡†åŒ¹é…ä¸»é¢˜çš„åˆ‡æ¢

:::

åˆ›å»ºè‡ªåŠ¨ä¸»é¢˜é€»è¾‘ï¼š

```ts
// services/themeService.ts
import { useThemeStore } from '@/stores/theme'

let themeTimer: number | null = null

export const startAutoThemeUpdate = () => {
  const themeStore = useThemeStore()
  
  // ç«‹å³æ›´æ–°ä¸€æ¬¡
  themeStore.updateThemeByTime()
  
  // è®¾ç½®å®šæ—¶å™¨ï¼Œæ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
  themeTimer = setInterval(() => {
    themeStore.updateThemeByTime()
  }, 60 * 1000) // 1åˆ†é’Ÿ
  
  return () => {
    if (themeTimer) {
      clearInterval(themeTimer)
      themeTimer = null
    }
  }
}

export const stopAutoThemeUpdate = () => {
  if (themeTimer) {
    clearInterval(themeTimer)
    themeTimer = null
  }
}
```

app.vue ä¸­å¼•å…¥è‡ªåŠ¨é€»è¾‘ï¼š

```vue
<script setup lang="ts">
import { onHide, onLaunch, onShow } from '@dcloudio/uni-app'

import { startAutoThemeUpdate } from '@/services/themeService' // [!code ++]
import { useThemeStore } from '@/stores' // [!code ++]

// å¼•å…¥å…¨å±€æ ·å¼ // [!code ++]
import '@/styles/theme.scss' // [!code ++]

onLaunch(() => {
  console.log('App Launch')
  // å¯åŠ¨è‡ªåŠ¨ä¸»é¢˜æ›´æ–°
  startAutoThemeUpdate() // [!code ++]
})
onShow(() => {
  console.log('App Show')
  // åº”ç”¨ä»åå°æ¢å¤æ—¶ç«‹å³æ›´æ–°ä¸»é¢˜ // [!code ++]
  const themeStore = useThemeStore() // [!code ++]
  themeStore.updateThemeByTime() // [!code ++]
})
onHide(() => {
  console.log('App Hide')
})
</script>
```



## ä½¿ç”¨æ–¹æ³•

::: details - ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

ä»¥ headTop.vue ç»„ä»¶ä¸ºä¾‹ï¼š

```vue
<script setup lang="ts">
import { useThemeStore, useWeatherStore } from '@/stores'
import { computed } from 'vue'

const weatherStore = useWeatherStore() // å…¨å±€å¤©æ°”çŠ¶æ€
const themeStore = useThemeStore() // ä½¿ç”¨å…¨å±€ä¸»é¢˜store

// åˆ é™¤æœ¬åœ°çš„ themeClassã€updateThemeByTimeã€timer é€»è¾‘
// è¿™äº›ç°åœ¨ç”±å…¨å±€storeç®¡ç†

// è·å–å±å¹•è¾¹ç•Œåˆ°å®‰å…¨åŒºåŸŸè·ç¦»
const { safeAreaInsets } = uni.getSystemInfoSync()
console.log(safeAreaInsets)

const greeting = computed(() => {
  const hour = new Date().getHours()

  if (hour >= 5 && hour < 9) {
    return 'æ—©ä¸Šå¥½'
  } else if (hour >= 9 && hour < 12) {
    return 'ä¸Šåˆå¥½'
  } else if (hour >= 12 && hour < 14) {
    return 'ä¸­åˆå¥½'
  } else if (hour >= 14 && hour < 18) {
    return 'ä¸‹åˆå¥½'
  } else {
    return 'æ™šä¸Šå¥½'
  }
})
</script>

<template>
  <view
    :class="['navbar', 'theme', themeStore.currentTheme]"
    :style="{ paddingTop: safeAreaInsets?.top + 'px' }"
  >
    <!-- topæ–‡å­— -->
    <view class="top">
      <view class="top-left">
        <text class="hello-title">{{ greeting }}ï¼</text>
        <text class="hello-dec">æ„Ÿè°¢æ‚¨é€‰æ‹©äº‘å³°å†œæœ</text>
      </view>
      <view class="top-right">.</view>
    </view>

    <!-- navBar-bottom -->
    <view class="navbar-bottom">
      <div class="location">
        <text class="iconfont location-icon">&#xe790;</text>
        <text class="info-text">ç‰¡ä¸¹åŒº</text>
      </div>
      <div class="tianqi">
        <text class="tianqi-temp info-text">{{ weatherStore.weatherData?.tem }}Â°</text>
        <text class="tianqi-desc info-text">{{ weatherStore.weatherData?.wea }}</text>
      </div>
      <div class="shidu">
        <text class="iconfont shidu-icon">&#xe682;</text>
        <text class="info-text">65%</text>
      </div>
      <div class="air">
        <text class="iconfont air-icon">&#xe60e;</text>
        <text class="info-text air-text">è‰¯å¥½</text>
      </div>
    </view>
  </view>
</template>

<style lang="scss">
/* è‡ªå®šä¹‰å¯¼èˆªæ¡ */
.navbar {
  background-size: cover;
  position: relative;
  display: flex;
  flex-direction: column;
  padding-top: 10rpx;

  // ä½¿ç”¨ CSS å˜é‡å®šä¹‰èƒŒæ™¯
  background: var(--color-bg-navbar);

  .top {
    padding: 30rpx 30rpx 10rpx 30rpx;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;

    .top-left {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 10rpx;
      .hello-title {
        font-size: 40rpx;
        font-weight: 600;
        color: var(--color-text-white); // ä½¿ç”¨ CSS å˜é‡
      }
      .hello-dec {
        font-size: 26rpx;
        font-weight: 400;
        color: var(--color-text-white); // ä½¿ç”¨ CSS å˜é‡
        letter-spacing: 1rpx;
      }
    }

    .top-right {
      color: var(--color-info); // ä½¿ç”¨ CSS å˜é‡
    }
  }

  .navbar-bottom {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 80rpx;
    padding: 10rpx 20rpx 50rpx 20rpx;
    margin-top: 30rpx;
    border-radius: 50rpx 50rpx 0 0;
    background-color: var(--color-bg-transparent); // ä½¿ç”¨ CSS å˜é‡

    // ç»Ÿä¸€æ‰€æœ‰å­å…ƒç´ çš„æ ·å¼
    .tianqi,
    .location,
    .shidu,
    .air {
      display: flex;
      align-items: center;
      justify-content: center;
      flex: 1;
      padding: 20rpx;
      gap: 8rpx;
      position: relative;

      // æ¯ä¸ªå…ƒç´ éƒ½æœ‰ç«–æ 
      &::after {
        content: '';
        position: absolute;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 1rpx;
        height: 30rpx;
        background-color: var(--color-border); // ä½¿ç”¨ CSS å˜é‡
      }

      // éšè—æœ€åä¸€ä¸ªå…ƒç´ çš„ç«–æ 
      &:last-child::after {
        display: none;
      }
    }

    .air-text {
      margin-left: 8rpx;
    }

    // ç»Ÿä¸€å›¾æ ‡å’Œæ–‡å­—æ ·å¼
    .location-icon,
    .shidu-icon,
    .air-icon {
      color: var(--color-text-white); // ä½¿ç”¨ CSS å˜é‡
    }

    .location-icon {
      font-size: 32rpx;
    }

    .shidu-icon,
    .air-icon {
      font-size: 36rpx;
    }

    .info-text {
      font-size: 28rpx;
      color: var(--color-text-white); // ä½¿ç”¨ CSS å˜é‡
    }
  }
}
</style>
```

å·²ç»è¯å®ï¼Œåªéœ€è¦åœ¨å°½å¯èƒ½é¡¶çº§çš„æ ‡ç­¾ä¸­ï¼Œæ·»åŠ å…¨å±€ theme.scss ä¸­å®šä¹‰çš„ä¸»é¢˜ç±»åï¼Œæ—¢å¯ä»¥å®ç°ä»»æ„è°ƒç”¨å…¶ä¸­è®¾å®šå¥½çš„æ ·å¼ç±»åï¼Œå…¶ä¸­è¿˜è®¾ç½®äº†é»˜è®¤ä¸»é¢˜ä¸º light-themeï¼š

``` scss
// ==================== é¡µé¢çº§ä¸»é¢˜ç±» ====================
.theme {
  // é»˜è®¤ä¸»é¢˜
  @include light-theme;

  // ä¸»é¢˜ç±»å
  &.light-mode {
    @include light-theme;
  }

  &.dark-mode {
    @include dark-theme;
  }

  &.dusk-mode {
    @include dusk-theme;
  }
}
```

æ—¢å¯ä»¥å®ç°å…¨å±€æ ·å¼çš„ä»»æ„ä½¿ç”¨ï¼Œå…¶ä¸­ï¼š.theme å°±æ˜¯éœ€è¦åŠ å…¥çš„ç±»åï¼›

è€Œä¸å¼ºåˆ¶å¿…é¡»å¼•å…¥å…¨å±€ store çŠ¶æ€ç®¡ç†ï¼Œè¿™è¯´æ˜è¿™æ˜¯ä¸€ä¸ªçº¯ css å®ç°æ–¹å¼ï¼Œ store åªè´Ÿè´£ç®¡æ§ä¸»é¢˜çŠ¶æ€ï¼

ä¸€æ—¦ä¸Šçº§æ ‡ç­¾åŠ å…¥äº†è¿™ä¸ªç±»åï¼Œè¿™ä¹ˆå…¶å­å­™çº§æ ‡ç­¾ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨`theme.scss`å®šä¹‰çš„å…¨éƒ¨ç±»åæ ·å¼ï¼Œä¾‹å¦‚ï¼š

```scss
@mixin light-theme {
  // èƒŒæ™¯è‰²ç³»ç»Ÿ
  --color-bg-page: #f5f7fa;
  --color-bg-card: #ffffff;
  --color-bg-navbar: linear-gradient(135deg, #03a9f0 20%, #0083fd 90%);
  --color-bg-transparent: rgba(255, 255, 255, 0.2);

  // æ–‡å­—è‰²ç³»ç»Ÿ
  --color-text-primary: #333333;
  --color-text-secondary: #666666;
  --color-text-tertiary: #999999;
  --color-text-white: #ffffff;

  // åŠŸèƒ½è‰²
  --color-success: #52c41a;
  --color-warning: #faad14;
  --color-error: #ff4d4f;
  --color-info: #1890ff;

  // è¾¹æ¡†
  --color-border: #e0e0e0;
  --color-divider: #f0f0f0;
}
```

:::

## ä¸“å±å‘ä½

::: details - ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

åœ¨é¡µé¢å’Œç»„ä»¶ä¸­ï¼Œç›´æ¥ä½¿ç”¨å…¨å±€å®šä¹‰çš„æ ·å¼ç±»ï¼Œå‘ç°ä¸ç”Ÿæ•ˆï¼ï¼ï¼

å³ä½¿æ˜¯å®šä¹‰äº†ï¼š

```scss
:root {
  // èƒŒæ™¯è‰²ç³»ç»Ÿé»˜è®¤å€¼
  --color-bg-page: #f5f7fa;
  --color-bg-card: #ffffff;
  --color-bg-navbar: linear-gradient(135deg, #f00366 20%, #0083fd 90%) !important;
  --color-bg-transparent: rgba(255, 255, 255, 0.2);

  // æ–‡å­—è‰²ç³»ç»Ÿé»˜è®¤å€¼
  --color-text-primary: #333333;
  --color-text-secondary: #666666;
  --color-text-tertiary: #999999;
  --color-text-white: #ffffff;

  // å…¶ä»–å˜é‡...
}
```

ä¹Ÿæ˜¯æ²¡å±Œç”¨ï¼Œé—®é¢˜åŸå› ï¼š

1. **å°ç¨‹åºæ— ä¼ ç»Ÿ DOM**ï¼šæ²¡æœ‰ `:root`ï¼ˆå³ `html` å…ƒç´ ï¼‰
2. **é¡µé¢éš”ç¦»**ï¼šæ¯ä¸ªé¡µé¢æ˜¯ç‹¬ç«‹çš„ Webview
3. **æ ·å¼ä½œç”¨åŸŸ**ï¼šå°ç¨‹åºçš„æ ·å¼ä½œç”¨åŸŸä¸ Web ä¸åŒ

:::



# ä½¿ç”¨æ¡ä»¶æ¸²æŸ“å®ç°tabåˆ‡æ¢

é¦–å…ˆï¼Œåˆ›å»ºç»„ä»¶ï¼š

```vue
<!-- components/tab-container/tabCard.vue -->
<template>
  <view class="tab-container theme">
    <!-- é¡¶éƒ¨ Tab åŒºåŸŸ -->
    <view class="tab-header">
      <view
        v-for="(tab, index) in tabList"
        :key="index"
        :class="['tab-item', activeIndex === index ? 'active' : '']"
        @click="switchTab(index)"
      >
        <view class="tab-content-wrapper">
          <text class="tab-text">{{ tab.title }}</text>

          <!-- æç¤º icon -->
          <view
            v-if="tab.badge || tab.dot || tab.new"
            :class="['tab-badge', tab.dot ? 'dot' : '', tab.new ? 'new-badge' : '']"
          >
            <text
              v-if="tab.badge"
              class="dot"
            >
              {{ tab.badge }}
            </text>
            <text
              v-else-if="tab.new"
              class="new-badge"
            >
              NEW
            </text>
          </view>
        </view>

        <!-- æŒ‡ç¤ºæ¡ -->
        <view
          v-if="activeIndex === index"
          class="tab-indicator"
        ></view>
      </view>
    </view>

    <!-- å†…å®¹åŒºåŸŸ -->
    <view class="tab-content">
      <view class="content-wrapper">
        <view
          v-for="index in tabList.length"
          :key="index"
          v-show="activeIndex === index - 1"
          :class="['content-item', getSlideDirection(index - 1)]"
        >
          <slot :name="`tab${index - 1}`" />
        </view>
      </view>
    </view>
  </view>
</template>

<script setup lang="ts">
import { defineEmits, defineProps, ref } from 'vue'

// âœ… å®šä¹‰ Tab ç±»å‹æ¥å£
interface TabItem {
  title: string
  badge?: number // æ•°å­—è§’æ ‡
  dot?: boolean // çº¢ç‚¹æç¤º
  new?: boolean // æ–°æ ‡ç­¾
  // å…¶ä»–è‡ªå®šä¹‰å›¾æ ‡
  // icon?: string;
  // iconActive?: string;
}

// âœ… Props å®šä¹‰
const props = defineProps({
  tabList: {
    type: Array as () => TabItem[],
    default: () => [{ title: 'æ ‡ç­¾1' }, { title: 'æ ‡ç­¾2' }, { title: 'æ ‡ç­¾3' }],
  },
  initialTab: {
    type: Number,
    default: 0,
  },
  animationType: {
    type: String as () => 'slide' | 'fade' | 'zoom',
    default: 'slide',
    validator: (val: string) => ['slide', 'fade', 'zoom'].includes(val),
  },
})

// âœ… Emits å®šä¹‰
const emit = defineEmits(['tab-change'])

// å½“å‰é€‰ä¸­ç´¢å¼•
const activeIndex = ref(props.initialTab)
// ä¸Šä¸€ä¸ªæ¿€æ´»çš„ç´¢å¼•ï¼Œç”¨äºåˆ¤æ–­æ»‘åŠ¨æ–¹å‘
const prevIndex = ref(props.initialTab)

// âœ… åˆ‡æ¢å‡½æ•°
const switchTab = (index: number) => {
  if (activeIndex.value === index) return // é˜²æ­¢é‡å¤ç‚¹å‡»

  prevIndex.value = activeIndex.value
  activeIndex.value = index
  emit('tab-change', { index, tab: props.tabList[index] })
}

// è·å–æ»‘åŠ¨æ–¹å‘ç±»å
const getSlideDirection = (index: number) => {
  if (activeIndex.value !== index) return ''

  const direction = index > prevIndex.value ? 'slide-left' : 'slide-right'
  return `${props.animationType}-${direction}`
}
</script>

<style lang="scss" scoped>
/* -------------------- é€šç”¨å®¹å™¨ -------------------- */
.tab-container {
  width: 100%;
  overflow: hidden;
  border-radius: 20rpx;

  .tab-header {
    display: flex;
    background: #fff;
    border-bottom: 1rpx solid #f0f0f0;

    .tab-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20rpx 0;
      position: relative;
      transition: transform 0.3s ease;
      will-change: transform;

      &:active {
        opacity: 0.6;
        transform: scale(0.98);
        transition: all 0.1s ease;
      }

      .tab-text {
        font-size: 28rpx;
        color: #666;
      }

      &.active {
        .tab-text {
          color: var(--vp-c-brand-3);
          font-weight: 600;
          transform: translateY(-2rpx);
        }
      }

      .tab-indicator {
        position: absolute;
        bottom: 0;
        width: 60rpx;
        height: 4rpx;
        border-radius: 2rpx;
        background: #007aff;
        animation: indicatorSlide 0.3s ease;
        will-change: transform, opacity;
      }

      @keyframes indicatorSlide {
        0% {
          transform: scaleX(0.8);
          opacity: 0;
        }
        100% {
          transform: scaleX(1);
          opacity: 1;
        }
      }

      .tab-content-wrapper {
        display: flex;
        position: relative;

        /* -------------------- è§’æ ‡ / çº¢ç‚¹ / NEW -------------------- */

        // 1ï¸âƒ£ æ•°å­—è§’æ ‡
        .tab-badge.badge {
          position: absolute;
          top: 10rpx;
          right: 10rpx;
          min-width: 32rpx;
          height: 32rpx;
          border-radius: 16rpx;
          padding: 0 8rpx;
          display: flex;
          align-items: center;
          justify-content: center;
          background: #ff3b30;

          .badge-text {
            color: #fff;
            font-size: 16rpx;
            font-weight: 500;
            line-height: 1;
          }
        }

        // 2ï¸âƒ£ çº¢ç‚¹
        .tab-badge.dot {
          position: absolute;
          top: 2rpx;
          right: -20rpx;
          width: 14rpx;
          height: 14rpx;
          border-radius: 50%;
          background: #ff3b30;
          padding: 0;
        }

        // 3ï¸âƒ£ NEW æç¤º
        .tab-badge.new-badge {
          position: absolute;
          top: -8rpx;
          right: -42rpx;
          padding: 0 6rpx;
          height: 20rpx;
          border-radius: 10rpx;
          background: #0bb23d;
          color: #fff;
          font-size: 14rpx;
          line-height: 20rpx;
          display: flex;
          align-items: center;
          justify-content: center;
        }
      }
    }
  }

  /* -------------------- å†…å®¹åŒºåŸŸ -------------------- */
  .tab-content {
    min-height: 465rpx;
    background: #fff;
    position: relative;
    overflow: hidden;

    .content-wrapper {
      position: relative;
      width: 100%;
      height: 100%;

      .content-item {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        transition: all 0.3s ease;
        will-change: transform, opacity;

        &.slide-slide-left {
          animation: slideInLeft 0.3s ease forwards;
        }

        &.slide-slide-right {
          animation: slideInRight 0.3s ease forwards;
        }

        &.zoom-slide-left,
        &.zoom-slide-right {
          animation: zoomIn 0.3s ease forwards;
        }
      }
    }
  }

  @keyframes slideInLeft {
    0% {
      transform: translateX(100%);
      opacity: 0;
    }
    100% {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes slideInRight {
    0% {
      transform: translateX(-100%);
      opacity: 0;
    }
    100% {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes zoomIn {
    0% {
      transform: scale(0.95);
      opacity: 0;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }
}
</style>
```

é¡µé¢ä¸­ä½¿ç”¨ï¼š

```html
<tab-card
  :tabList="tabs"
  animation-type="slide"
  @tab-change="onTabChange"
>
  <!-- âœ… å¿…é¡»ç”¨ #æ’æ§½ å†™æ³• -->
  <template #tab0>
    <!-- è¿›åº¦æ¡ç»„ä»¶ -->
    <ProgressBar
      :total-days="120"
      :current-day="49"
      :stages="cropStages"
      ref="progressBarRef"
    />
  </template>
  <template #tab1>
    <ShouyiCard></ShouyiCard>
  </template>
  <template #tab2>
    <view>å…¶ä»–æ¨¡å—</view>
  </template>
</tab-card>
```

# å…¨å±€ css æ ·å¼é¢„å®šä¹‰

ç›´æ¥åœ¨ src/uni.scss æ–‡ä»¶ä¸­ï¼š

```scss
$brand-1: #34d399;
$brand-2: #10b981;
$brand-3: #018c49;
$brand-4: #047857;
$brand-5: #065f46;
```

ç›´æ¥å®šä¹‰ï¼›

ä½¿ç”¨æ—¶ï¼Œå³å¯ä»¥ç›´æ¥ä½¿ç”¨å®šä¹‰å¥½çš„å˜é‡ï¼š

```scss
.shouyi-buttons {
    margin-top: 40rpx;
    display: flex;
    justify-content: space-between;
    button {
      width: 40%;
      padding: 14rpx 0;
      background-color: $brand-2;
      color: #fff;
      font-size: 28rpx;
      border: none;
      border-radius: 20rpx;
    }
  }
```



# è‡ªå®šä¹‰tabbarçš„è‡ªåŠ¨éšè—

::: details - ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…



:::



# æ•°å­—ç¿»æ»šç»„ä»¶çš„è®¾è®¡ä¸å®ç°

å®ç°äº†ä¸¤ç§ç¿»æ»šç­–ç•¥ï¼š

é€å­—ç¿»æ»šï¼š

::: details

```vue
<template>
  <view class="number-scroll-container">
    <view class="number-display">
      <text class="number-value">{{ displayValue }}</text>
      <text
        v-if="unit"
        class="unit"
      >
        {{ unit }}
      </text>
    </view>
    <text
      v-if="title"
      class="title"
    >
      {{ title }}
    </text>
  </view>
</template>

<script setup lang="ts">
import { onMounted, ref, watch } from 'vue'

const props = defineProps({
  // ç›®æ ‡å€¼
  value: {
    type: Number,
    default: 0,
  },
  // èµ·å§‹å€¼
  startValue: {
    type: Number,
    default: 0,
  },
  // åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  duration: {
    type: Number,
    default: 2000,
  },
  // å•ä½
  unit: {
    type: String,
    default: '',
  },
  // æ ‡é¢˜
  title: {
    type: String,
    default: '',
  },
  // æ˜¯å¦è‡ªåŠ¨å¼€å§‹åŠ¨ç”»
  autoStart: {
    type: Boolean,
    default: true,
  },
  // æ•°å­—æ ¼å¼åŒ–å‡½æ•°
  formatter: {
    type: Function,
    default: null,
  },
  // ç¼“åŠ¨å‡½æ•°
  easing: {
    type: Function,
    default: (t: number) => 1 - Math.pow(1 - t, 3), // easeOutCubic
  },
  // æ•°å­—ç²¾åº¦ï¼ˆå°æ•°ä½æ•°ï¼‰
  precision: {
    type: Number,
    default: 0,
  },
})

const emit = defineEmits(['animation-start', 'animation-end'])

const displayValue = ref(props.startValue)
const animationFrame = ref<ReturnType<typeof setTimeout> | null>(null)

// ç›‘å¬valueå˜åŒ–ï¼Œé‡æ–°å¼€å§‹åŠ¨ç”»
watch(
  () => props.value,
  () => {
    if (props.autoStart) {
      startAnimation()
    }
  },
)

onMounted(() => {
  if (props.autoStart) {
    startAnimation()
  }
})

// å¼€å§‹åŠ¨ç”»
const startAnimation = () => {
  stopAnimation() // åœæ­¢ä¹‹å‰çš„åŠ¨ç”»

  const startTime = Date.now()
  const startValue = displayValue.value
  const endValue = props.value
  const difference = endValue - startValue

  emit('animation-start', { startValue, endValue })

  const animate = () => {
    const currentTime = Date.now()
    const elapsed = currentTime - startTime
    const progress = Math.min(elapsed / props.duration, 1)

    // ä½¿ç”¨ç¼“åŠ¨å‡½æ•°
    const easedProgress = props.easing(progress)
    let currentValue = startValue + difference * easedProgress

    // å¤„ç†ç²¾åº¦
    if (props.precision > 0) {
      currentValue = Number(currentValue.toFixed(props.precision))
    } else {
      currentValue = Math.floor(currentValue)
    }

    // åº”ç”¨æ ¼å¼åŒ–å‡½æ•°
    if (props.formatter) {
      displayValue.value = props.formatter(currentValue)
    } else {
      displayValue.value = currentValue
    }

    if (progress < 1) {
      animationFrame.value = setTimeout(animate, 16) // çº¦60fps
    } else {
      // ç¡®ä¿æœ€ç»ˆå€¼å‡†ç¡®
      if (props.formatter) {
        displayValue.value = props.formatter(endValue)
      } else {
        displayValue.value = endValue
      }
      emit('animation-end', { startValue, endValue })
    }
  }

  animate()
}

// åœæ­¢åŠ¨ç”»
const stopAnimation = () => {
  if (animationFrame.value) {
    clearTimeout(animationFrame.value)
    animationFrame.value = null
  }
}

// é‡ç½®åˆ°èµ·å§‹å€¼
const reset = () => {
  stopAnimation()
  displayValue.value = props.startValue
}

// æš´éœ²æ–¹æ³•ç»™çˆ¶ç»„ä»¶
defineExpose({
  startAnimation,
  stopAnimation,
  reset,
})
</script>

<style scoped>
.number-scroll-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 20rpx;
}

.number-display {
  display: flex;
  align-items: baseline;
  gap: 8rpx;
}

.number-value {
  font-size: 48rpx;
  font-weight: bold;
  color: #ff6b35;
  font-variant-numeric: tabular-nums; /* ç­‰å®½æ•°å­— */
}

.unit {
  font-size: 32rpx;
  color: #666;
}

.title {
  font-size: 28rpx;
  color: #666;
  margin-top: 16rpx;
}
</style>
```

ä½¿ç”¨æ–¹æ³•ï¼š

```vue
<template>
  <view class="container">
    <!-- åŸºç¡€ç”¨æ³• -->
    <NumberScroll
      :value="1150"
      :startValue="980"
      unit="â„ƒ"
      title="ç´¯è®¡æ´»åŠ¨ç§¯æ¸©"
    />

    <!-- è‡ªå®šä¹‰æ ·å¼å’ŒåŠ¨ç”» -->
    <NumberScroll
      :value="8888.88"
      :startValue="0"
      :duration="5000"
      :precision="2"
      unit="å…ƒ"
      title="è´¦æˆ·ä½™é¢"
      class="custom-style"
    />

    <!-- æ‰‹åŠ¨æ§åˆ¶åŠ¨ç”» -->
    <NumberScroll
      ref="manualScroll"
      :value="100"
      :startValue="0"
      :autoStart="false"
      unit="%"
      title="å®Œæˆè¿›åº¦"
    />

    <button @click="startManualAnimation">å¼€å§‹åŠ¨ç”»</button>
  </view>
</template>

<script setup>
import NumberScroll from '@/components/numberPlay.vue'
import { ref } from 'vue'

const manualScroll = ref(null)

const startManualAnimation = () => {
  if (manualScroll.value) {
    manualScroll.value.startAnimation()
  }
}
</script>

<style scoped>
.container {
  padding: 40rpx;
}

.custom-style {
  margin-top: 40rpx;
}

.custom-style :deep(.number-value) {
  color: #1890ff;
  font-size: 56rpx;
}

.custom-style :deep(.title) {
  font-weight: bold;
}
</style>
```

:::



åè¿›ä½ç‹¬ç«‹ç¿»æ»šï¼š

```vue
<template>
  <view class="digit-roll-container">
    <view class="digits-wrapper">
      <!-- æ•´æ•°éƒ¨åˆ† -->
      <view
        v-for="(digit, index) in integerDigits"
        :key="'int-' + index"
        class="digit-column"
      >
        <view
          class="digit-scroll"
          :style="getDigitScrollStyle(digit, index, 'integer')"
        >
          <text
            v-for="num in 10"
            :key="num"
            class="digit-number"
          >
            {{ num - 1 }}
          </text>
        </view>
      </view>

      <!-- å°æ•°ç‚¹ -->
      <text
        v-if="hasDecimal"
        class="decimal-point"
      >
        .
      </text>

      <!-- å°æ•°éƒ¨åˆ† -->
      <view
        v-for="(digit, index) in decimalDigits"
        :key="'dec-' + index"
        class="digit-column"
      >
        <view
          class="digit-scroll"
          :style="getDigitScrollStyle(digit, index, 'decimal')"
        >
          <text
            v-for="num in 10"
            :key="num"
            class="digit-number"
          >
            {{ num - 1 }}
          </text>
        </view>
      </view>

      <!-- å•ä½ -->
      <text
        v-if="unit"
        class="unit"
      >
        {{ unit }}
      </text>
    </view>

    <!-- æ ‡é¢˜ -->
    <text
      v-if="title"
      class="title"
    >
      {{ title }}
    </text>
  </view>
</template>

<script setup lang="ts">
import { computed, onMounted, ref, watch, withDefaults } from 'vue'

/** æ¯ä¸ªæ•°å­—åˆ—çš„ç±»å‹å®šä¹‰ */
interface DigitItem {
  current: number
  target: number
  position: number
}

type DigitType = 'integer' | 'decimal'

const props = withDefaults(
  defineProps<{
    value: number
    startValue?: number
    duration?: number
    unit?: string
    title?: string
    autoStart?: boolean
    precision?: number
  }>(),
  {
    value: 0,
    startValue: 0,
    duration: 2000,
    autoStart: true,
    precision: 0,
  },
)

const integerDigits = ref<DigitItem[]>([])
const decimalDigits = ref<DigitItem[]>([])

const hasDecimal = computed(() => (props.precision ?? 0) > 0)

/** åˆå§‹åŒ–æ•°å­—åˆ— */
const initDigits = (): void => {
  const start = Number(props.startValue ?? 0)
  const end = Number(props.value ?? 0)
  const precision = Math.max(0, Math.floor(props.precision ?? 0))

  // å¤„ç†è´Ÿæ•°ï¼ˆå¦‚æœéœ€è¦å±•ç¤ºè´Ÿå·éœ€é¢å¤–å¤„ç†ï¼Œè¿™é‡Œå…ˆå–ç»å¯¹å€¼åšä½æ•°æ¯”å¯¹ï¼‰
  const startInt = Math.floor(Math.abs(start))
  const endInt = Math.floor(Math.abs(end))

  const startIntStr = String(startInt)
  const endIntStr = String(endInt)

  const maxIntLength = Math.max(startIntStr.length, endIntStr.length)
  const startIntPadded = startIntStr.padStart(maxIntLength, '0')
  const endIntPadded = endIntStr.padStart(maxIntLength, '0')

  integerDigits.value = startIntPadded.split('').map((digit, index) => ({
    current: parseInt(digit, 10),
    target: parseInt(endIntPadded[index]!, 10), // âœ… åŠ ä¸Š !
    position: index,
  }))

  // å°æ•°éƒ¨åˆ†
  if (precision > 0) {
    // ç”¨ç»å¯¹å€¼çš„æ®‹ä½™è®¡ç®—ï¼Œé¿å…æµ®ç‚¹é—®é¢˜ï¼šå…ˆä¹˜ç„¶åå–æ•´
    const pow = Math.pow(10, precision)
    const startDecimal = Math.round(Math.abs(start - Math.floor(Math.abs(start))) * pow)
    const endDecimal = Math.round(Math.abs(end - Math.floor(Math.abs(end))) * pow)

    const startDecimalStr = String(startDecimal).padStart(precision, '0')
    const endDecimalStr = String(endDecimal).padStart(precision, '0')

    decimalDigits.value = startDecimalStr.split('').map((digit, index) => ({
      current: parseInt(digit, 10),
      target: parseInt(endDecimalStr[index]!, 10), // âœ… åŠ ä¸Š !
      position: index,
    }))
  } else {
    decimalDigits.value = []
  }
}

/** æ•°å­—æ»šåŠ¨æ ·å¼ */
const getDigitScrollStyle = (
  digit: DigitItem,
  index: number,
  type: DigitType,
): Record<string, string> => {
  const duration = props.duration ?? 2000
  const delay = type === 'integer' ? (integerDigits.value.length - index - 1) * 100 : index * 100

  // ä½¿ç”¨å½“å‰å€¼å†³å®š translate
  const translateY = `-${digit.current * 10}%`

  return {
    transform: `translateY(${translateY})`,
    transition: `transform ${duration}ms ${delay}ms cubic-bezier(0.4, 0, 0.2, 1)`,
  }
}

/** å¯åŠ¨åŠ¨ç”»ï¼šæŠŠ current æ”¹ä¸º targetï¼ˆè§¦å‘ CSS transitionï¼‰ */
const startAnimation = (): void => {
  integerDigits.value.forEach(digit => {
    // ç›´æ¥èµ‹å€¼ä¼šè§¦å‘å“åº”å¼æ›´æ–°
    digit.current = digit.target
  })
  decimalDigits.value.forEach(digit => {
    digit.current = digit.target
  })
}

/** ç›‘å¬ value å˜åŒ–ï¼ˆç«‹å³æ‰§è¡Œä¸€æ¬¡ä»¥åˆå§‹åŒ–ï¼‰ */
watch(
  () => props.value,
  () => {
    initDigits()
    if (props.autoStart ?? true) {
      // ä¿ç•™å°‘é‡å»¶è¿Ÿä»¥ç¡®ä¿ DOM å·²æ¸²æŸ“æ ·å¼åˆæ€
      setTimeout(startAnimation, 100)
    }
  },
  { immediate: true },
)

onMounted(() => {
  // onMounted åœ¨å¤šæ•°æƒ…å†µä¸‹ redundantï¼ˆwatch { immediate } å·²å¤„ç†ï¼‰ï¼Œä½†ä¿ç•™ä»¥é˜²å¤–éƒ¨ç›´æ¥è°ƒç”¨
  initDigits()
  if (props.autoStart ?? true) {
    setTimeout(startAnimation, 100)
  }
})
</script>

<style scoped>
.digit-roll-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 20rpx;
}

.digits-wrapper {
  display: flex;
  align-items: flex-end;
  gap: 2rpx;
}

.digit-column {
  height: 60rpx;
  overflow: hidden;
  position: relative;
}

.digit-scroll {
  display: flex;
  flex-direction: column;
  transition: transform 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.digit-number {
  height: 60rpx;
  font-size: 48rpx;
  font-weight: bold;
  color: #ff6b35;
  font-variant-numeric: tabular-nums;
  line-height: 60rpx;
  text-align: center;
}

.decimal-point {
  font-size: 48rpx;
  font-weight: bold;
  color: #ff6b35;
  margin: 0 4rpx;
}

.unit {
  font-size: 32rpx;
  color: #666;
  margin-left: 8rpx;
}

.title {
  font-size: 28rpx;
  color: #666;
  margin-top: 16rpx;
}
</style>
```

ä½¿ç”¨ç»„ä»¶ï¼š

```vue
<template>
  <view>
    <!-- ç›´æ¥ä½¿ç”¨ç»„ä»¶ -->
    <FastDigitRoll
      :value="currentValue"
      :startValue="oldValue"
      unit="â„ƒ"
      title="å®æ—¶æ¸©åº¦"
    />
  </view>
</template>

<script setup lang="ts">
import FastDigitRoll from '@/components/numberPlay10.vue'
import { onMounted, ref } from 'vue'

const oldValue = 1120

const currentValue = ref(oldValue)

onMounted(() => {
  // æ¨¡æ‹Ÿæ•°æ®æ›´æ–°
  setTimeout(() => {
    currentValue.value = 1250
  }, 1000)
})
</script>
```

# ç¿»æ»šç»„ä»¶çš„æ”¹è¿›

::: details - ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

æ”¹è¿›ç‰ˆç»„ä»¶ï¼Œå¯ä»¥è‡ªç”±å®šåˆ¶é¢œè‰²ã€æ ·å¼ã€åŠ¨ç”»è¡Œé«˜ï¼š

```vue
<template>
  <view class="digit-roll-container">
    <view class="digits-wrapper">
      <!-- æ•´æ•°éƒ¨åˆ† -->
      <view
        v-for="(digit, index) in integerDigits"
        :key="'int-' + index"
        class="digit-column"
        :style="getColumnStyle()"
      >
        <view
          class="digit-scroll"
          :style="getDigitScrollStyle(digit, index, 'integer')"
        >
          <text
            v-for="num in 10"
            :key="num"
            class="digit-number"
            :style="getNumberStyle()"
          >
            {{ num - 1 }}
          </text>
        </view>
      </view>

      <!-- å°æ•°ç‚¹ -->
      <text
        v-if="hasDecimal"
        class="decimal-point"
        :style="getUnitStyle()"
      >
        .
      </text>

      <!-- å°æ•°éƒ¨åˆ† -->
      <view
        v-for="(digit, index) in decimalDigits"
        :key="'dec-' + index"
        class="digit-column"
        :style="getColumnStyle()"
      >
        <view
          class="digit-scroll"
          :style="getDigitScrollStyle(digit, index, 'decimal')"
        >
          <text
            v-for="num in 10"
            :key="num"
            class="digit-number"
            :style="getNumberStyle()"
          >
            {{ num - 1 }}
          </text>
        </view>
      </view>

      <!-- å•ä½ -->
      <text
        v-if="unit"
        class="unit"
        :style="getUnitStyle()"
      >
        {{ unit }}
      </text>
    </view>

    <!-- æ ‡é¢˜ -->
    <text
      v-if="title"
      class="title"
      :style="getTitleStyle()"
    >
      {{ title }}
    </text>
  </view>
</template>

<script setup lang="ts">
import { computed, onMounted, ref, watch, withDefaults } from 'vue'

/** æ¯ä¸ªæ•°å­—åˆ—çš„ç±»å‹å®šä¹‰ */
interface DigitItem {
  current: number
  target: number
  position: number
}

type DigitType = 'integer' | 'decimal'

const props = withDefaults(
  defineProps<{
    value: number
    startValue?: number
    duration?: number
    unit?: string
    title?: string
    autoStart?: boolean
    precision?: number
    // æ–°å¢æ ·å¼ç›¸å…³ props
    fontSize?: number | string
    fontWeight?: string | number
    color?: string
    unitColor?: string
    titleColor?: string
    titleSize?: number | string
    lineHeight?: number | string
    digitHeight?: number | string // æ–°å¢ï¼šæ•°å­—åˆ—é«˜åº¦
  }>(),
  {
    value: 0,
    startValue: 0,
    duration: 2000,
    autoStart: true,
    precision: 0,
    // é»˜è®¤æ ·å¼å€¼
    fontSize: '48rpx',
    fontWeight: 'bold',
    color: '#ff6b35',
    unitColor: '',
    titleColor: '',
    titleSize: '',
    lineHeight: '60rpx',
    digitHeight: '60rpx', // é»˜è®¤é«˜åº¦
  },
)

const integerDigits = ref<DigitItem[]>([])
const decimalDigits = ref<DigitItem[]>([])

const hasDecimal = computed(() => (props.precision ?? 0) > 0)

/** æ•°å­—åˆ—æ ·å¼ */
const getColumnStyle = (): Record<string, string> => {
  return {
    height: typeof props.digitHeight === 'number' ? `${props.digitHeight}rpx` : props.digitHeight,
    overflow: 'hidden',
  }
}

/** æ•°å­—æ ·å¼ */
const getNumberStyle = (): Record<string, string> => {
  const digitHeight =
    typeof props.digitHeight === 'number' ? `${props.digitHeight}rpx` : props.digitHeight
  const lineHeight = props.lineHeight || digitHeight // å¦‚æœæ²¡æœ‰è®¾ç½®lineHeightï¼Œä½¿ç”¨digitHeight

  const style: Record<string, string> = {
    height: digitHeight,
    'line-height': typeof lineHeight === 'number' ? `${lineHeight}rpx` : lineHeight,
    'font-size': typeof props.fontSize === 'number' ? `${props.fontSize}rpx` : props.fontSize,
    'font-weight': String(props.fontWeight),
    color: props.color,
    'text-align': 'center',
    'font-variant-numeric': 'tabular-nums',
  }
  return style
}

/** å•ä½å’Œå°æ•°ç‚¹æ ·å¼ */
const getUnitStyle = (): Record<string, string> => {
  const digitHeight =
    typeof props.digitHeight === 'number' ? `${props.digitHeight}rpx` : props.digitHeight
  const lineHeight = props.lineHeight || digitHeight
  const unitColor = props.unitColor || props.color

  const style: Record<string, string> = {
    height: digitHeight,
    'line-height': typeof lineHeight === 'number' ? `${lineHeight}rpx` : lineHeight,
    'font-size': typeof props.fontSize === 'number' ? `${props.fontSize}rpx` : props.fontSize,
    'font-weight': String(props.fontWeight),
    color: unitColor,
  }
  return style
}

/** æ ‡é¢˜æ ·å¼ */
const getTitleStyle = (): Record<string, string> => {
  const titleColor = props.titleColor || props.color
  const titleSize = props.titleSize || props.fontSize
  const style: Record<string, string> = {
    'font-size': typeof titleSize === 'number' ? `${titleSize}rpx` : titleSize,
    color: titleColor,
  }
  return style
}

/** åˆå§‹åŒ–æ•°å­—åˆ— */
const initDigits = (): void => {
  const start = Number(props.startValue ?? 0)
  const end = Number(props.value ?? 0)
  const precision = Math.max(0, Math.floor(props.precision ?? 0))

  // å¤„ç†è´Ÿæ•°ï¼ˆå¦‚æœéœ€è¦å±•ç¤ºè´Ÿå·éœ€é¢å¤–å¤„ç†ï¼Œè¿™é‡Œå…ˆå–ç»å¯¹å€¼åšä½æ•°æ¯”å¯¹ï¼‰
  const startInt = Math.floor(Math.abs(start))
  const endInt = Math.floor(Math.abs(end))

  const startIntStr = String(startInt)
  const endIntStr = String(endInt)

  const maxIntLength = Math.max(startIntStr.length, endIntStr.length)
  const startIntPadded = startIntStr.padStart(maxIntLength, '0')
  const endIntPadded = endIntStr.padStart(maxIntLength, '0')

  integerDigits.value = startIntPadded.split('').map((digit, index) => ({
    current: parseInt(digit, 10),
    target: parseInt(endIntPadded[index]!, 10),
    position: index,
  }))

  // å°æ•°éƒ¨åˆ†
  if (precision > 0) {
    const pow = Math.pow(10, precision)
    const startDecimal = Math.round(Math.abs(start - Math.floor(Math.abs(start))) * pow)
    const endDecimal = Math.round(Math.abs(end - Math.floor(Math.abs(end))) * pow)

    const startDecimalStr = String(startDecimal).padStart(precision, '0')
    const endDecimalStr = String(endDecimal).padStart(precision, '0')

    decimalDigits.value = startDecimalStr.split('').map((digit, index) => ({
      current: parseInt(digit, 10),
      target: parseInt(endDecimalStr[index]!, 10),
      position: index,
    }))
  } else {
    decimalDigits.value = []
  }
}

/** æ•°å­—æ»šåŠ¨æ ·å¼ */
const getDigitScrollStyle = (
  digit: DigitItem,
  index: number,
  type: DigitType,
): Record<string, string> => {
  const duration = props.duration ?? 2000
  const delay = type === 'integer' ? (integerDigits.value.length - index - 1) * 100 : index * 100

  const translateY = `-${digit.current * 10}%`

  return {
    transform: `translateY(${translateY})`,
    transition: `transform ${duration}ms ${delay}ms cubic-bezier(0.4, 0, 0.2, 1)`,
  }
}

/** å¯åŠ¨åŠ¨ç”»ï¼šæŠŠ current æ”¹ä¸º targetï¼ˆè§¦å‘ CSS transitionï¼‰ */
const startAnimation = (): void => {
  integerDigits.value.forEach(digit => {
    digit.current = digit.target
  })
  decimalDigits.value.forEach(digit => {
    digit.current = digit.target
  })
}

/** ç›‘å¬ value å˜åŒ– */
watch(
  () => props.value,
  () => {
    initDigits()
    if (props.autoStart ?? true) {
      setTimeout(startAnimation, 100)
    }
  },
  { immediate: true },
)

onMounted(() => {
  initDigits()
  if (props.autoStart ?? true) {
    setTimeout(startAnimation, 100)
  }
})
</script>

<style scoped>
.digit-roll-container {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.digits-wrapper {
  display: flex;
  align-items: center;
}

.digit-column {
  overflow: hidden;
}

.digit-scroll {
  display: flex;
  flex-direction: column;
}

.digit-number {
  text-align: center;
  font-variant-numeric: tabular-nums;
}

.unit {
  margin-left: 8rpx;
}

.decimal-point {
  margin: 0 4rpx;
}

.title {
  margin-top: 16rpx;
  text-align: center;
}
</style>
```

ç°åœ¨ï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š

```html
<template>
  <digit-roll
    :value="1234.56"
    :precision="2"
    unit="å…ƒ"
    title="æ€»é‡‘é¢"
    :font-size="52"
    :digit-height="80"
    :line-height="80"
    color="#1890ff"
  />
</template>
```

å…¶ä¸­ï¼Œ`:precision="2"` ä»£è¡¨å°æ•°ç²¾åº¦ï¼Œé»˜è®¤ä¸º0ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¼ é€’å°æ•°è¿›å»æ—¶ï¼Œéœ€è¦ç›¸åº”çš„ä¿®æ”¹è¯¥å€¼ï¼Œå¦åˆ™ä¸æ˜¾ç¤ºå°æ•°éƒ¨åˆ†ï¼

:::

# echarts è¡¨æ ¼çš„ä½¿ç”¨

::: details

ä½¿ç”¨lime-uiä¸­çš„echarts

ä¸€æ˜¯ç‰ˆæœ¬é—®é¢˜ï¼Œç›®å‰lime-uiä»…æ”¯æŒåˆ° echarts5ï¼Œè¯¦è§ [lime-ui](https://limeui.qcoon.cn/#/overview) å®˜ç½‘ã€‚

äºŒæ˜¯ ä¸¤ä¸ªä¾èµ–éœ€è¦å®‰è£…ï¼Œ`pnpm add zrender`å’Œ`pnpm add tslib`

```
pnpm install echarts zrender tslib
```

ä¸‰æ˜¯æŒ‰éœ€å¼•å…¥çš„é—®é¢˜

ã€ŒæŒ‰éœ€å¼•å…¥ ECharts ä¹‹åï¼ŒåŒ…ä½“ç§¯æ¯”æœªä½¿ç”¨æ—¶å¤šå‡ºçº¦ **1.4 MB**ã€çš„æƒ…å†µï¼Œæ­£å¥½å¤„äº **ECharts æœ€å°å¯ç”¨å†…æ ¸ä½“ç§¯çš„æ­£å¸¸èŒƒå›´**ã€‚

------

ğŸ“Š æˆ‘ä»¬æ¥æ‹†è§£ä¸€ä¸‹è¿™ 1.4 MB åˆ°åº•è£…äº†ä»€ä¹ˆï¼š

å³ä½¿ä½ åªæƒ³ç”»ä¸€å¼ ç®€å•çš„æŠ˜çº¿å›¾ï¼ˆ`LineChart`ï¼‰ï¼ŒECharts ä»ç„¶å¿…é¡»åŒ…å«ï¼š

| æ¨¡å—                                               | ä½œç”¨                                               | çº¦å ä½“ç§¯       |
| -------------------------------------------------- | -------------------------------------------------- | -------------- |
| `echarts/core`                                     | æ ¸å¿ƒè°ƒåº¦ç³»ç»Ÿï¼ˆäº‹ä»¶ã€è°ƒåº¦ã€åæ ‡ç³»ã€åŠ¨ç”»ã€æ•°æ®ç®¡ç†ï¼‰ | ~400 KB        |
| `GridComponent`                                    | åæ ‡ç³»ç½‘æ ¼ï¼ˆæŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾å¿…éœ€ï¼‰                   | ~200 KB        |
| `TooltipComponent`                                 | æç¤ºæ¡†                                             | ~150 KB        |
| `LegendComponent`                                  | å›¾ä¾‹                                               | ~100 KB        |
| `TitleComponent`                                   | æ ‡é¢˜æ”¯æŒ                                           | ~60 KB         |
| `CanvasRenderer`                                   | Canvas æ¸²æŸ“å¼•æ“                                    | ~300 KB        |
| è¿è¡Œæ—¶å·¥å…·ï¼ˆ`zrender/util`ã€ç»˜å›¾æŒ‡ä»¤ã€é¢œè‰²å·¥å…·ç­‰ï¼‰ | å†…éƒ¨ä¾èµ–                                           | ~150 KB        |
| **åˆè®¡**                                           | â€”                                                  | â‰ˆ 1.3 â€“ 1.6 MB |



æ¨èçš„æœ€ä½³å®è·µæ–¹æ¡ˆ

âœ… æ–¹æ¡ˆ 1ï¼šåˆ›å»ºä¸€ä¸ªå…¨å±€ `echarts` å°è£…æ¨¡å—ï¼ˆæœ€å¸¸ç”¨ï¼‰

**æ­¥éª¤ï¼š**

1. åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼ˆä¾‹å¦‚ `/utils/echarts.js`ï¼‰ï¼š

   ```js
   // utils/echarts.js
   import * as echarts from 'echarts/core'
   import {
     LineChart,
     BarChart,
     PieChart,
     RadarChart,
   } from 'echarts/charts'
   import {
     TitleComponent,
     TooltipComponent,
     GridComponent,
     LegendComponent,
   } from 'echarts/components'
   import { CanvasRenderer } from 'echarts/renderers'
   import { UniversalTransition } from 'echarts/features'
   
   echarts.use([
     TitleComponent,
     TooltipComponent,
     GridComponent,
     LegendComponent,
     LineChart,
     BarChart,
     PieChart,
     RadarChart,
     CanvasRenderer,
     UniversalTransition,
   ])
   
   export default echarts
   ```

2. è°ƒç”¨ä½ç½®ï¼š

   ```vue
   <template>
     <view style="height: 750rpx">
       <l-echart ref="chartRef"></l-echart>
       <text>test</text>
     </view>
   </template>
   
   <script setup lang="ts">
   import echarts from '@/utils/echarts'
   import { onMounted, ref } from 'vue'
   // ä½¿ç”¨ ref å¼•ç”¨å›¾è¡¨å®ä¾‹
   const chartRef = ref()
   
   // å›¾è¡¨é…ç½®é¡¹
   const option = ref({
     tooltip: {
       trigger: 'axis',
       axisPointer: {
         type: 'cross',
         label: {
           backgroundColor: '#6a7985',
         },
       },
     },
     legend: {
       data: ['é‚®ä»¶è¥é”€', 'è”ç›Ÿå¹¿å‘Š', 'è§†é¢‘å¹¿å‘Š', 'ç›´æ¥è®¿é—®', 'æœç´¢å¼•æ“'],
     },
     grid: {
       left: '3%',
       right: '4%',
       bottom: '3%',
       containLabel: true,
     },
     xAxis: [
       {
         type: 'category',
         boundaryGap: false,
         data: ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'],
       },
     ],
     yAxis: [
       {
         type: 'value',
       },
     ],
     series: [
       {
         name: 'é‚®ä»¶è¥é”€',
         type: 'line',
         stack: 'æ€»é‡',
         areaStyle: {},
         emphasis: {
           focus: 'series',
         },
         data: [120, 132, 101, 134, 90, 230, 210],
       },
       {
         name: 'è”ç›Ÿå¹¿å‘Š',
         type: 'line',
         stack: 'æ€»é‡',
         areaStyle: {},
         emphasis: {
           focus: 'series',
         },
         data: [220, 182, 191, 234, 290, 330, 310],
       },
       {
         name: 'è§†é¢‘å¹¿å‘Š',
         type: 'line',
         stack: 'æ€»é‡',
         areaStyle: {},
         emphasis: {
           focus: 'series',
         },
         data: [150, 232, 201, 154, 190, 330, 410],
       },
       {
         name: 'ç›´æ¥è®¿é—®',
         type: 'line',
         stack: 'æ€»é‡',
         areaStyle: {},
         emphasis: {
           focus: 'series',
         },
         data: [320, 332, 301, 334, 390, 330, 320],
       },
       {
         name: 'æœç´¢å¼•æ“',
         type: 'line',
         stack: 'æ€»é‡',
         label: {
           show: true,
           position: 'top',
         },
         areaStyle: {},
         emphasis: {
           focus: 'series',
         },
         data: [820, 932, 901, 934, 1290, 1330, 1320],
       },
     ],
   })
   
   // åˆå§‹åŒ–å›¾è¡¨
   onMounted(() => {
     if (chartRef.value) {
       chartRef.value.init(echarts, (chart: echarts.ECharts) => {
         chart.setOption(option.value)
       })
     }
   })
   </script>
   
   ```

   

:::



# echarts ä¸“å±å‘ä½ - åˆ†åŒ…



# echarts å®æˆ˜æŠ€å·§

åŸºæœ¬é…ç½®

```js
const initTemperatureChart = (): EChartsOption => {
  const xData = getTimeLabels()
  const yData = getCurrentData()

  // åŠ¨æ€ç§¯æ¸©çº¿é…ç½®
  const accumulatedTempSeries: LineSeriesOption = {
    name: accumulatedTemperatureData.value.name,
    type: 'line',
    data: new Array(xData.length).fill(accumulatedTemperatureData.value.value),
    lineStyle: {
      color: accumulatedTemperatureData.value.color || '#59aaf8',
      width: 2,
    },
    symbol: 'none',
    tooltip: {
      trigger: 'axis',
      formatter: (params: unknown) => {
        const paramsArray = (Array.isArray(params) ? params : [params]) as Array<{
          seriesName: string
          value: number
        }>

        const tempLine = paramsArray.find(
          item => item.seriesName === accumulatedTemperatureData.value.name,
        )
        if (tempLine) {
          return `${tempLine.seriesName}: ${tempLine.value}Â°C`
        }
        return ''
      },
    },
    label: { show: false },
    itemStyle: { opacity: 0 },
  }

  const series: LineSeriesOption[] = [
    // ä¸»æ¸©åº¦çº¿
    {
      name: 'æ¸©åº¦',
      type: 'line',
      smooth: true,
      data: yData,
      symbolSize: 8,
      itemStyle: {
        color: '#0BC677',
        borderColor: '#fff',
        borderWidth: 2,
      },
      lineStyle: { color: '#0BC677', width: 2 },
      areaStyle: {
        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
          { offset: 0, color: 'rgba(10,198,119,0.3)' },
          { offset: 1, color: 'rgba(10,198,119,0.1)' },
        ]),
      },
    },
    // åŠ¨æ€ç§¯æ¸©çº¿
    accumulatedTempSeries,
  ]

  // åŠ¨æ€é«˜æ¸©è­¦æˆ’çº¿ - æ ¹æ®å½“å‰ä½œç‰©æ˜¾ç¤º
  const highTempThreshold = accumulatedTemperatureData.value.highTempThreshold
  if (highTempThreshold && Math.max(...yData) >= highTempThreshold - 5) {
    // å½“æœ€é«˜æ¸©åº¦æ¥è¿‘é«˜æ¸©è­¦æˆ’çº¿æ—¶æ˜¾ç¤ºï¼ˆé˜ˆå€¼-5åº¦ï¼‰
    series.push({
      name: 'é«˜æ¸©è­¦æˆ’çº¿',
      type: 'line',
      data: new Array(xData.length).fill(highTempThreshold),
      lineStyle: {
        color: accumulatedTemperatureData.value.highTempColor || '#f44336',
        width: 2,
        type: 'dashed',
      },
      symbol: 'none',
      tooltip: {
        trigger: 'axis',
        formatter: () => {
          return `é«˜æ¸©è­¦æˆ’çº¿: ${highTempThreshold}Â°C`
        },
      },
      label: {
        show: true,
        formatter: `${highTempThreshold}Â°C`,
        color: accumulatedTemperatureData.value.highTempColor || '#f44336',
        fontWeight: 'bold',
      },
      itemStyle: { opacity: 0 },
    })
  }

  return {
    title: {
      text: 'æ¸©åº¦å˜åŒ–',
      left: '10',
      subtext: `å½“å‰ç§¯æ¸©:1542`,
      subtextStyle: {
        fontSize: 12,
        color: '#666',
      },
    },
    tooltip: { trigger: 'axis' },
    legend: {
      data: series.map(s => s.name!) as string[],
      top: 16,
      right: 10,
    },
    grid: {
      top: '20%', // å¢åŠ é¡¶éƒ¨ç©ºé—´ä»¥å®¹çº³å‰¯æ ‡é¢˜
      left: '3%',
      right: '1%',
      bottom: '6%',
      containLabel: true,
    },
    xAxis: [
      {
        type: 'category',
        boundaryGap: false,
        data: xData,
      },
    ],
    yAxis: [
      {
        type: 'value',
        name: '',
        nameTextStyle: {
          color: '#666',
          fontSize: 16,
          fontWeight: 'normal',
          padding: [0, 0, 5, 125],
        },
        interval: 10,
        max: 45,
        axisLine: {
          show: true,
          lineStyle: {
            color: '#e6e6e6',
            width: 1,
          },
        },
        splitLine: {
          show: true,
          lineStyle: {
            type: 'dashed',
            color: '#e0e0e0',
            width: 1,
          },
        },
        axisLabel: {
          color: '#666',
          fontSize: 12,
          fontWeight: 'normal',
        },
      },
    ],
    series,
  }
}
```

åŠ¨æ€è®¡ç®—yè½´çš„æ¯”ä¾‹

```js
const initTemperatureChart = (): EChartsOption => {
  const xData = getTimeLabels()
  const yData = getCurrentData()

  // åŠ¨æ€è®¡ç®— Y è½´é…ç½®
  const yAxisConfig = calculateYAxisConfig(yData, 'temperature')

  // åŠ¨æ€ç§¯æ¸©çº¿é…ç½®
  const accumulatedTempSeries: LineSeriesOption = {
    name: accumulatedTemperatureData.value.name,
    type: 'line',
    data: new Array(xData.length).fill(accumulatedTemperatureData.value.value),
    lineStyle: {
      color: accumulatedTemperatureData.value.color || '#59aaf8',
      width: 2,
    },
    symbol: 'none',
    tooltip: {
      trigger: 'axis',
      formatter: (params: unknown) => {
        const paramsArray = (Array.isArray(params) ? params : [params]) as Array<{
          seriesName: string
          value: number
        }>

        const tempLine = paramsArray.find(
          item => item.seriesName === accumulatedTemperatureData.value.name,
        )
        if (tempLine) {
          return `${tempLine.seriesName}: ${tempLine.value}Â°C`
        }
        return ''
      },
    },
    label: { show: false },
    itemStyle: { opacity: 0 },
  }

  const series: LineSeriesOption[] = [
    // ä¸»æ¸©åº¦çº¿
    {
      name: 'æ¸©åº¦',
      type: 'line',
      smooth: true,
      data: yData,
      symbolSize: 8,
      itemStyle: {
        color: '#0BC677',
        borderColor: '#fff',
        borderWidth: 2,
      },
      lineStyle: { color: '#0BC677', width: 2 },
      areaStyle: {
        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
          { offset: 0, color: 'rgba(10,198,119,0.3)' },
          { offset: 1, color: 'rgba(10,198,119,0.1)' },
        ]),
      },
    },
    // åŠ¨æ€ç§¯æ¸©çº¿
    accumulatedTempSeries,
  ]

  // åŠ¨æ€é«˜æ¸©è­¦æˆ’çº¿ - æ ¹æ®å½“å‰ä½œç‰©æ˜¾ç¤º
  const highTempThreshold = accumulatedTemperatureData.value.highTempThreshold
  if (highTempThreshold && Math.max(...yData) >= highTempThreshold - 5) {
    // å½“æœ€é«˜æ¸©åº¦æ¥è¿‘é«˜æ¸©è­¦æˆ’çº¿æ—¶æ˜¾ç¤ºï¼ˆé˜ˆå€¼-5åº¦ï¼‰
    series.push({
      name: 'é«˜æ¸©è­¦æˆ’çº¿',
      type: 'line',
      data: new Array(xData.length).fill(highTempThreshold),
      lineStyle: {
        color: accumulatedTemperatureData.value.highTempColor || '#f44336',
        width: 2,
        type: 'dashed',
      },
      symbol: 'none',
      tooltip: {
        trigger: 'axis',
        formatter: () => {
          return `é«˜æ¸©è­¦æˆ’çº¿: ${highTempThreshold}Â°C`
        },
      },
      label: {
        show: true,
        formatter: `${highTempThreshold}Â°C`,
        color: accumulatedTemperatureData.value.highTempColor || '#f44336',
        fontWeight: 'bold',
      },
      itemStyle: { opacity: 0 },
    })
  }

  return {
    title: {
      text: 'æ¸©åº¦å˜åŒ–',
      left: '10',
      subtext: `å½“å‰ç§¯æ¸©:1542`,
      subtextStyle: {
        fontSize: 12,
        color: '#666',
      },
    },
    tooltip: { trigger: 'axis' },
    legend: {
      data: series.map(s => s.name!) as string[],
      top: 16,
      right: 10,
    },
    grid: {
      top: '20%', // å¢åŠ é¡¶éƒ¨ç©ºé—´ä»¥å®¹çº³å‰¯æ ‡é¢˜
      left: '3%',
      right: '1%',
      bottom: '6%',
      containLabel: true,
    },
    xAxis: [
      {
        type: 'category',
        boundaryGap: false,
        data: xData,
      },
    ],
    yAxis: [
      {
        type: 'value',
        name: '',
        nameTextStyle: {
          color: '#666',
          fontSize: 16,
          fontWeight: 'normal',
          padding: [0, 0, 5, 125],
        },
        min: yAxisConfig.min,
        max: yAxisConfig.max,
        interval: yAxisConfig.interval,
        axisLine: {
          show: true,
          lineStyle: {
            color: '#e6e6e6',
            width: 1,
          },
        },
        splitLine: {
          show: true,
          lineStyle: {
            type: 'dashed',
            color: '#e0e0e0',
            width: 1,
          },
        },
        axisLabel: {
          color: '#666',
          fontSize: 12,
          fontWeight: 'normal',
        },
      },
    ],
    series,
  }
}
```

ä¾èµ–å‡½æ•°ï¼š

```
```

