# tabCard ç»„ä»¶

ç»„ä»¶å®šä¹‰ï¼š

::: code-group

```vue
<!-- components/tabCard/tabCard.vue -->
<template>
  <view class="tab-container theme">
    <!-- é¡¶éƒ¨ Tab åŒºåŸŸ -->
    <view class="tab-header">
      <view
        v-for="(tab, index) in tabList"
        :key="index"
        :class="['tab-item', activeIndex === index ? 'active' : '']"
        @click="switchTab(index)"
      >
        <view class="tab-content-wrapper">
          <text class="tab-text">{{ tab.title }}</text>

          <!-- æç¤º icon -->
          <view
            v-if="tab.badge || tab.dot || tab.new"
            :class="['tab-badge', tab.dot ? 'dot' : '', tab.new ? 'new-badge' : '']"
          >
            <text
              v-if="tab.badge"
              class="dot"
            >
              {{ tab.badge }}
            </text>
            <text
              v-else-if="tab.new"
              class="new-badge"
            >
              NEW
            </text>
          </view>
        </view>

        <!-- æŒ‡ç¤ºæ¡ -->
        <view
          v-if="activeIndex === index"
          class="tab-indicator"
        ></view>
      </view>
    </view>

    <!-- å†…å®¹åŒºåŸŸ -->
    <view class="tab-content">
      <view class="content-wrapper">
        <view
          v-for="index in tabList.length"
          :key="index"
          v-show="activeIndex === index - 1"
          :class="['content-item', getSlideDirection(index - 1)]"
        >
          <slot :name="`tab${index - 1}`" />
        </view>
      </view>
    </view>
  </view>
</template>
```

```ts [jsé€»è¾‘]
<script setup lang="ts">
import { defineEmits, defineProps, ref } from 'vue'

// âœ… å®šä¹‰ Tab ç±»å‹æ¥å£
interface TabItem {
  title: string
  badge?: number // æ•°å­—è§’æ ‡
  dot?: boolean // çº¢ç‚¹æç¤º
  new?: boolean // æ–°æ ‡ç­¾
  // å…¶ä»–è‡ªå®šä¹‰å›¾æ ‡
  // icon?: string;
  // iconActive?: string;
}

// âœ… Props å®šä¹‰
const props = defineProps({
  tabList: {
    type: Array as () => TabItem[],
    default: () => [{ title: 'æ ‡ç­¾1' }, { title: 'æ ‡ç­¾2' }, { title: 'æ ‡ç­¾3' }],
  },
  initialTab: {
    type: Number,
    default: 0,
  },
  animationType: {
    type: String as () => 'slide' | 'fade' | 'zoom',
    default: 'slide',
    validator: (val: string) => ['slide', 'fade', 'zoom'].includes(val),
  },
})

// âœ… Emits å®šä¹‰
const emit = defineEmits(['tab-change'])

// å½“å‰é€‰ä¸­ç´¢å¼•
const activeIndex = ref(props.initialTab)
// ä¸Šä¸€ä¸ªæ¿€æ´»çš„ç´¢å¼•ï¼Œç”¨äºåˆ¤æ–­æ»‘åŠ¨æ–¹å‘
const prevIndex = ref(props.initialTab)

// âœ… åˆ‡æ¢å‡½æ•°
const switchTab = (index: number) => {
  if (activeIndex.value === index) return // é˜²æ­¢é‡å¤ç‚¹å‡»

  prevIndex.value = activeIndex.value
  activeIndex.value = index
  emit('tab-change', { index, tab: props.tabList[index] })
}

// è·å–æ»‘åŠ¨æ–¹å‘ç±»å
const getSlideDirection = (index: number) => {
  if (activeIndex.value !== index) return ''

  const direction = index > prevIndex.value ? 'slide-left' : 'slide-right'
  return `${props.animationType}-${direction}`
}
</script>
```



```scss [æ ·å¼]
<style lang="scss" scoped>
/* -------------------- é€šç”¨å®¹å™¨ -------------------- */
.tab-container {
  width: 100%;
  overflow: hidden;
  border-radius: 20rpx;

  .tab-header {
    display: flex;
    background: #fff;
    border-bottom: 1rpx solid #f0f0f0;

    .tab-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20rpx 0;
      position: relative;
      transition: transform 0.3s ease;
      will-change: transform;

      &:active {
        opacity: 0.6;
        transform: scale(0.98);
        transition: all 0.1s ease;
      }

      .tab-text {
        font-size: 28rpx;
        color: #666;
      }

      &.active {
        .tab-text {
          color: var(--vp-c-brand-3);
          font-weight: 600;
          transform: translateY(-2rpx);
        }
      }

      .tab-indicator {
        position: absolute;
        bottom: 0;
        width: 60rpx;
        height: 4rpx;
        border-radius: 2rpx;
        background: #007aff;
        animation: indicatorSlide 0.3s ease;
        will-change: transform, opacity;
      }

      @keyframes indicatorSlide {
        0% {
          transform: scaleX(0.8);
          opacity: 0;
        }
        100% {
          transform: scaleX(1);
          opacity: 1;
        }
      }

      .tab-content-wrapper {
        display: flex;
        position: relative;

        /* -------------------- è§’æ ‡ / çº¢ç‚¹ / NEW -------------------- */

        // 1ï¸âƒ£ æ•°å­—è§’æ ‡
        .tab-badge.badge {
          position: absolute;
          top: 10rpx;
          right: 10rpx;
          min-width: 32rpx;
          height: 32rpx;
          border-radius: 16rpx;
          padding: 0 8rpx;
          display: flex;
          align-items: center;
          justify-content: center;
          background: #ff3b30;

          .badge-text {
            color: #fff;
            font-size: 16rpx;
            font-weight: 500;
            line-height: 1;
          }
        }

        // 2ï¸âƒ£ çº¢ç‚¹
        .tab-badge.dot {
          position: absolute;
          top: 2rpx;
          right: -20rpx;
          width: 14rpx;
          height: 14rpx;
          border-radius: 50%;
          background: #ff3b30;
          padding: 0;
        }

        // 3ï¸âƒ£ NEW æç¤º
        .tab-badge.new-badge {
          position: absolute;
          top: -8rpx;
          right: -42rpx;
          padding: 0 6rpx;
          height: 20rpx;
          border-radius: 10rpx;
          background: #0bb23d;
          color: #fff;
          font-size: 14rpx;
          line-height: 20rpx;
          display: flex;
          align-items: center;
          justify-content: center;
        }
      }
    }
  }

  /* -------------------- å†…å®¹åŒºåŸŸ -------------------- */
  .tab-content {
    min-height: 570rpx;
    background: #fff;
    position: relative;
    overflow: hidden;

    .content-wrapper {
      position: relative;
      width: 100%;
      height: 100%;

      .content-item {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        transition: all 0.3s ease;
        will-change: transform, opacity;

        &.slide-slide-left {
          animation: slideInLeft 0.3s ease forwards;
        }

        &.slide-slide-right {
          animation: slideInRight 0.3s ease forwards;
        }

        &.zoom-slide-left,
        &.zoom-slide-right {
          animation: zoomIn 0.3s ease forwards;
        }
      }
    }
  }

  @keyframes slideInLeft {
    0% {
      transform: translateX(100%);
      opacity: 0;
    }
    100% {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes slideInRight {
    0% {
      transform: translateX(-100%);
      opacity: 0;
    }
    100% {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes zoomIn {
    0% {
      transform: scale(0.95);
      opacity: 0;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }
}
</style>
```

:::

è°ƒç”¨ä½ç½®ï¼š

::: code-group ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

```vue
<tab-card
  :tabList="tabs"
  animation-type="slide"
  @tab-change="onTabChange"
>
  <!-- âœ… å¿…é¡»ç”¨ #æ’æ§½ å†™æ³• -->
  <template #tab0>
    <!-- ç»‘å®šå•ä¸ªå±æ€§æ—¶æœ‰ç®€å†™ ï¼š -->
    <!-- ä½†æ˜¯ç»‘å®šæ•´ä¸ªå¯¹è±¡æ—¶ï¼Œå°±ä¸å¯ä»¥ä½¿ç”¨ç®€å†™äº† -->
    <ImgCard v-bind="singleCardData"></ImgCard>
  </template>
  <template #tab1>
    <!-- è¿›åº¦æ¡ç»„ä»¶ -->
    <ProgressBar
      :total-days="120"
      :current-day="49"
      :stages="cropStages"
      ref="progressBarRef"
    />
  </template>
  <template #tab2>
    <ShouyiCard></ShouyiCard>
  </template>
</tab-card>
```

```ts [jsé€»è¾‘]
const tabs = [
  { title: 'äº§å“è¯¦æƒ…' },
  { title: 'å½“å‰é˜¶æ®µ', new: true },
  { title: 'é¢„è®¡æ”¶ç›Š', dot: true },
]
const onTabChange = (e: { index: number; title: string }) => {
  if (progressBarRef.value) {
    if (e.index === 1) {
      progressBarRef.value.scrollToStage()
    }
  }
  console.log('åˆ‡æ¢åˆ°ï¼š', e)
}
```

:::

å…¶ä¸­ï¼Œ`animation-type="slide"` åœ¨è°ƒç”¨ä½ç½®ç›´æ¥ä¼ å€¼å³å¯ï¼å› ä¸ºé¢„å…ˆåœ¨ç»„ä»¶ä¸­å®šä¹‰ä¸åŒçš„åŠ¨ç”»åˆ‡æ¢æ–¹å¼ã€‚

# å›¾ç‰‡å±•ç¤ºç»„ä»¶

## è½®æ’­ç»„ä»¶

uniapp çš„å†…ç½®ç»„ä»¶ swiper ï¼Œè‡ªå¸¦çš„æ»‘åŠ¨åœ†ç‚¹ä¸æ”¯æŒæ ·å¼è®¾ç½®å’Œç‚¹å‡»åˆ‡æ¢ itemï¼Œå·²ä¸‹æ˜¯è¯¦ç»†å®ç°ä»£ç ï¼š

```
<script setup lang="ts">
import { ref } from 'vue'

const indicatorDots = ref(false) // éšè—åŸç”Ÿçš„
const autoplay = ref(true)
const interval = ref(4000)
const duration = ref(500)

const current = ref(0)

const change = (e: any) => {
  current.value = e.detail.current
}

const clickDot = (index: number) => {
  current.value = index
}
</script>

<template>
  <view class="card-inner">
    <view class="img-head">
      <image
        class="head-left"
        src="http://lychee.iooio.cn:9527/uploads/original/4d/0d/2bdbd7bd407907f53282aeff8083.png"
      ></image>

      <view class="head-right">
        <swiper
          class="head-swiper"
          circular
          :indicator-dots="false"
          :current="current"
          @change="change"
          :autoplay="autoplay"
          :interval="interval"
          :duration="duration"
        >
          <swiper-item v-for="(item, index) in 3" :key="index">
            <image
              class="img-swiper"
              mode="aspectFill"
              src="http://lychee.iooio.cn:9527/uploads/original/4d/0d/2bdbd7bd407907f53282aeff8083.png"
            ></image>
          </swiper-item>
        </swiper>

        <!-- è‡ªå®šä¹‰æŒ‡ç¤ºç‚¹ -->
        <view class="dots">
          <view
            v-for="(dot, index) in 3"
            :key="index"
            class="dot"
            :class="{ active: current === index }"
            @click="clickDot(index)"
          ></view>
        </view>
      </view>
    </view>

    <view class="card-dec">æ–‡å­—æè¿°</view>
  </view>
</template>

<style lang="scss" scoped>
.img-head {
  padding-top: 10rpx;
  display: flex;
  justify-content: space-between;

  .head-left {
    width: 250rpx;
    height: auto;
    margin-right: 16rpx;
    border-radius: 12rpx;
    box-sizing: border-box;
  }

  .head-right {
    width: 100%;
    position: relative;
    height: 250rpx;
    overflow: hidden;
    border-radius: 12rpx;

    .img-swiper {
      width: 100%;
      height: 250rpx;
      display: block;
    }

    .dots {
      position: absolute;
      bottom: 12rpx;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 12rpx;

      .dot {
        width: 14rpx;
        height: 14rpx;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.4);
      }

      .active {
        background: rgba(255, 255, 255, 1);
      }
    }
  }
}

.card-dec {
  margin-top: 20rpx;
  color: #333;
  font-size: 28rpx;
}
</style>
```

å…¶ä¸­çš„æŒ‡ç¤ºç‚¹ã€å½“ç„¶ï¼Œå¯¹æˆ‘æ¥è¯´ä¹Ÿæ˜¯çŸ¥è¯†ç‚¹ï¼š

1. UniApp éµå¾ªå¾®ä¿¡å°ç¨‹åºçš„äº‹ä»¶è§„èŒƒï¼Œå…¶ä¸­ `detail` ç”¨äºä¼ é€’ç»„ä»¶è‡ªå®šä¹‰æ•°æ®ï¼š

```
<!-- ç»„ä»¶è§¦å‘äº‹ä»¶æ—¶ -->
<swiper @change="change">
  <!-- swiper ç»„ä»¶åœ¨å˜åŒ–æ—¶ä¼šè§¦å‘äº‹ä»¶ï¼Œå¹¶é€šè¿‡ detail ä¼ é€’å½“å‰é¡µç  -->
</swiper>
```



2. **è‡ªå®šä¹‰äº‹ä»¶æ•°æ®**

å½“ç»„ä»¶è§¦å‘äº‹ä»¶æ—¶ï¼Œç›¸å…³çš„æ•°æ®éƒ½æ”¾åœ¨ `detail` ä¸­ï¼š

```
// swiper ç»„ä»¶å˜åŒ–æ—¶
const change = (e) => {
  console.log(e.detail.current) // å½“å‰é¡µç 
}

// picker ç»„ä»¶é€‰æ‹©æ—¶
const pickerChange = (e) => {
  console.log(e.detail.value)   // é€‰ä¸­çš„å€¼
}

// æŒ‰é’®ç‚¹å‡»æ—¶
const buttonClick = (e) => {
  console.log(e.detail)         // å¯èƒ½åŒ…å«å…¶ä»–ä¿¡æ¯
}
```



3. **ç»Ÿä¸€çš„æ•°æ®é€šé“**

`detail` æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„å±æ€§æ¥ä¼ é€’äº‹ä»¶ç›¸å…³æ•°æ®ï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨äº‹ä»¶å¯¹è±¡ä¸Šæ·»åŠ å„ç§å±æ€§ã€‚

å®é™…ç¤ºä¾‹

```
<template>
  <!-- å„ç§ç»„ä»¶çš„äº‹ä»¶éƒ½ä½¿ç”¨ detail -->
  <swiper @change="onSwiperChange">
  <picker @change="onPickerChange">
  <button @click="onButtonClick">
  <input @input="onInput">
</template>

<script>
export default {
  methods: {
    onSwiperChange(e) {
      console.log(e.detail.current) // è½®æ’­å›¾å½“å‰ç´¢å¼•
    },
    onPickerChange(e) {
      console.log(e.detail.value)   // é€‰æ‹©å™¨é€‰ä¸­çš„å€¼
    },
    onButtonClick(e) {
      console.log(e.detail)         // å¯èƒ½åŒ…å«å…¶ä»–ä¿¡æ¯
    },
    onInput(e) {
      console.log(e.detail.value)   // è¾“å…¥æ¡†çš„å€¼
    }
  }
}
</script>
```

è®¾è®¡åŸå› 

1. **ä¸€è‡´æ€§**ï¼šæ‰€æœ‰ç»„ä»¶çš„äº‹ä»¶æ•°æ®éƒ½é€šè¿‡ `detail` ä¼ é€’
2. **æ‰©å±•æ€§**ï¼šå¯ä»¥åœ¨ `detail` ä¸­è‡ªç”±æ·»åŠ æ•°æ®è€Œä¸æ±¡æŸ“äº‹ä»¶å¯¹è±¡
3. **å…¼å®¹æ€§**ï¼šä¸å¾®ä¿¡å°ç¨‹åºã€æ”¯ä»˜å®å°ç¨‹åºç­‰ä¿æŒä¸€è‡´æ€§

æ‰€ä»¥ `e.detail` æ˜¯ UniApp/å°ç¨‹åºç”Ÿæ€ä¸­çš„**æ ‡å‡†åšæ³•**ï¼Œä¸æ˜¯ JavaScript åŸç”Ÿäº‹ä»¶çš„å¯¹è±¡ç»“æ„ã€‚



## åŸç”Ÿuni-swiper-dotç»„ä»¶çš„ä½¿ç”¨

ç›¸æ¯”ä¹‹ä¸‹ - è¿™ä¸ªæ•ˆæœæ›´ä¸æ»‘ï¼ˆéœ€è¦ä¾èµ–å…¶ä»–uni-ç»„ä»¶ï¼‰ï¼Œå› æ­¤ï¼Œå¿…é¡»ä½¿ç”¨ hbuild å·¥å…·æ•´ä¸ªå®‰è£…è¿™ä¸ªæ’ä»¶åŒ…ï¼

å…¶å®ï¼Œå‚ç…§è¿™ä¸ªçº¯æ‰‹å†™ä¸€ä¸ªåœ†ç‚¹çš„ï¼Œä¹Ÿä¸éš¾ï¼Œè‡ªå·±æ‰‹å†™å¯ä»¥é¿å…ä¸€äº›é—®é¢˜ï¼Œä¾‹å¦‚ï¼ˆå¯èƒ½ï¼‰æŒ‡ç¤ºç‚¹çš„å®šä½é—®é¢˜ï¼Œå®˜æ–¹å¯èƒ½ä¾æ®å›¾ç‰‡ä¸‹è¾¹è·è¿›è¡Œç›¸å¯¹å®šä½ï¼Œå¯¼è‡´ä¸å¤Ÿç»†è‡´çš„ç”¨æˆ·ä½“éªŒï¼Œå› ä¸ºå›¾ç‰‡æ¯”ä¾‹ä¼šæœ‰äº›å·®å¼‚ï¼Œæ²ƒæ©æ‰‹å†™çš„è¯ï¼Œå¯ä»¥å†™å®šï¼Œç›´æ¥ç›¸å¯¹çˆ¶ç›’å­è¿›è¡Œå®šä½ï¼

::: code-group

```html [æ ‡ç­¾ç»“æ„]
<view class="custom-swiper-container">
  <uni-swiper-dot
    :info="info"
    :current="current"
    field="content"
    mode="default"
    @clickItem="clickItem"
  >
    <swiper
      class="swiper-box"
      :current="current"
      @change="change"
      :autoplay="autoplay"
      :interval="interval"
      :duration="duration"
      circular
    >
      <swiper-item
        v-for="(item, index) in info"
        :key="index"
      >
        <view
          class="swiper-item"
          :class="item.colorClass"
        >
          <image
            :src="item.url"
            mode="aspectFill"
            class="swiper-image"
          />
          <text class="swiper-text">{{ item.content }}</text>
        </view>
      </swiper-item>
    </swiper>
  </uni-swiper-dot>
</view>
```



```js [jsé€»è¾‘]
<script setup lang="ts">
import { ref } from 'vue'

const indicatorDots = ref<boolean>(true)
const autoplay = ref<boolean>(true)
const interval = ref<number>(4000)
const duration = ref<number>(500)

// æ·»åŠ  current å“åº”å¼å˜é‡
const current = ref<number>(0)

const info = [
  {
    colorClass: 'uni-bg-red',
    url: 'https://qiniu-web-assets.dcloud.net.cn/unidoc/zh/shuijiao.jpg',
    content: 'å†…å®¹ A',
  },
  {
    colorClass: 'uni-bg-green',
    url: 'https://qiniu-web-assets.dcloud.net.cn/unidoc/zh/shuijiao.jpg',
    content: 'å†…å®¹ B',
  },
  {
    colorClass: 'uni-bg-blue',
    url: 'https://qiniu-web-assets.dcloud.net.cn/unidoc/zh/shuijiao.jpg',
    content: 'å†…å®¹ C',
  },
]

// æ·»åŠ  change æ–¹æ³•
const change = (e: { detail: { current: number } }) => {
  current.value = e.detail.current
  console.log('swiper åˆ‡æ¢:', current.value)
}

// æ·»åŠ  clickItem æ–¹æ³•
const clickItem = (index: number) => {
  current.value = index
  console.log('ç‚¹å‡»æŒ‡ç¤ºç‚¹:', index)
}
</script>
```



```css [æ ·å¼]
.custom-swiper-container {
  margin-top: 40rpx;
  position: relative;

  .swiper-box {
    height: 400rpx;
    border-radius: 12rpx;
    overflow: hidden;
  }

  .swiper-item {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
  }

  .swiper-image {
    width: 100%;
    height: 100%;
  }

  .swiper-text {
    position: absolute;
    bottom: 30rpx;
    left: 30rpx;
    color: white;
    font-size: 36rpx;
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
  }
}

// èƒŒæ™¯è‰²ç±»
.uni-bg-red {
  background-color: #ff5a5f;
}

.uni-bg-green {
  background-color: #09bb07;
}

.uni-bg-blue {
  background-color: #007aff;
}
```



# å¯¼èˆªæ ä¸“å±å‘ä½



## å›ºå®šå®šä½

ç›´æ¥å†™é¡µé¢å¯¼èˆªæ æ˜¯ä¸‡ä¸‡ä¸èƒ½çš„ï¼Œç¼–å†™äº†å¯¼èˆªæ ç»„ä»¶ï¼Œéœ€è¦å¯¹å…¶ä¸­çš„å®šä½åšç‰¹æ®Šçš„å®‰æ’ï¼

åŸå§‹é¡µé¢æ²¡æœ‰ä¸“é—¨é’ˆå¯¹navBarçš„å®‰æ’ï¼Œé¡µé¢ç»“æ„æ— åºã€ä¸è§„èŒƒï¼Œæ— ä»»ä½•å‚è€ƒæ„ä¹‰ï¼Œæ€»ç»“ä¸€å¥è¯ï¼ŒæŠŠnavbarå½“ä½œæ™®é€šçš„é¡µé¢æ ‡ç­¾æ¥å†™äº†ï¼š

```vue
<template>
  <view
    class="navbar"
    :style="{ paddingTop: (safeAreaInsets?.top ?? 0) + 26 + 'px' }"
  >
    <!-- topæ–‡å­— -->
    <view class="top">
      <view class="top-left">
        <text class="title">ç™»æµ·605D (æŠ—è™«ç‰ˆ)</text>
        <view class="dec">
          <view class="dec-left">
            <text style="padding-bottom: 14rpx">é¢ç§¯:1800äº©</text>
            <text>æ ½åŸ¹æ–¹å¼:å®½çª„è¡Œ</text>
          </view>
          <view class="dec-right">
            <text style="padding-bottom: 14rpx">ä½ç½®:12å·åœ°å—</text>
            <text>å¯†åº¦:5500æ ª/äº©</text>
          </view>
        </view>
      </view>
      <image
        src="https://lychee.iooio.cn:9528/uploads/original/91/75/684b95f8f9d86ab96b283a4cb4b7.png"
        class="top-right"
        mode="heightFix"
      >
        .
      </image>
    </view>

    <view class="dikuai-info">
      <view class="info-group">
        <text>14â„ƒ</text>
        <text>åœŸå£¤æ¸©åº¦</text>
      </view>
      <view class="info-group">
        <text>57%</text>
        <text>åœŸå£¤æ¹¿åº¦</text>
      </view>
      <view class="info-group">
        <text>7.2</text>
        <text>åœŸå£¤PH</text>
      </view>
      <view class="info-group">
        <text>1.3m/s</text>
        <text>é£é€Ÿ</text>
      </view>
    </view>

    <uni-notice-bar
      :speed="30"
      show-icon
      showClose
      scrollable
      single
      text="æ‚¨è´­ä¹°çš„ç™»æµ·605dï¼Œç”±ç™»æµ·å…¬å¸æˆæƒå¾·ä¸°å†œèµ„æ€»ç»é”€ï¼Œå¤§åŒå¾·ä¸°å†œèµ„ - ä¸ºæ‚¨æä¾›ä»ç§åˆ°æ”¶çš„å…¨è¿‡ç¨‹æœåŠ¡ï¼è”ç³»ç”µè¯ï¼š0530-5551905"
    ></uni-notice-bar>

    <tab-card
      :tabList="tabs"
      animation-type="slide"
      @tab-change="onTabChange"
    >
      <!-- âœ… å¿…é¡»ç”¨ #æ’æ§½ å†™æ³• -->
      <template #tab0>
        <!-- ç»‘å®šå•ä¸ªå±æ€§æ—¶æœ‰ç®€å†™ ï¼š -->
        <!-- ä½†æ˜¯ç»‘å®šæ•´ä¸ªå¯¹è±¡æ—¶ï¼Œå°±ä¸å¯ä»¥ä½¿ç”¨ç®€å†™äº† -->
        <ImgCard v-bind="singleCardData"></ImgCard>
      </template>
      <template #tab1>
        <!-- è¿›åº¦æ¡ç»„ä»¶ -->
        <ProgressBar
          :total-days="120"
          :current-day="49"
          :stages="cropStages"
          ref="progressBarRef"
        />
      </template>
      <template #tab2>
        <ShouyiCard></ShouyiCard>
      </template>
    </tab-card>
  </view>
  <view class="main-page">
    <view class="info-days theme-card">
      <view class="info-days-top">
        <view class="bozhong-days">
          <text>å·²æ’­ç§(å¤©)</text>
          <text>25</text>
        </view>
        <view class="shouhuo-days">
          <text>é¢„è®¡85å¤©å</text>
        </view>
      </view>
      <view class="info-days-bottom"></view>
    </view>
    <button>æ•°æ®è¯¦æƒ…</button>
  </view>
</template>
```

æ˜¾ç„¶ï¼Œéœ€è¦æ”¹é€ ï¼

é¦–å…ˆï¼Œå¯¹äºnavBaræ ‡ç­¾ï¼Œå¤–å±‚ä½¿ç”¨ä¸€ä¸ªçˆ¶å®¹å™¨åŒ…è£¹ï¼Œè¿™æ˜¯ä¸ºäº†è®©é¡µé¢ç»“æ„æ•´ä½“æ›´åŠ ç›´è§‚ã€é€’è¿›ï¼Œä¹Ÿå› ä¸ºnavå¯¼èˆªæ çš„å®šä½æ–¹å¼æœ‰å®ƒçš„ç‰¹æ®Šæ€§ï¼Œå¿…é¡»ä¸å…¶ä»–é¡µé¢ç»“æ„åˆ†å¼€ï¼ˆå½“ç„¶ï¼ŒåŒ…è£¹çˆ¶å®¹å™¨å…¶å®å¹¶éå¿…é¡»çš„ï¼‰ï¼š

::: code-group

```vue [æ ‡ç­¾ç»“æ„]
<template>
  <view class="dikuai-details-page">
    <!-- å®Œæ•´å¯¼èˆªæ ç»“æ„ -->
    <view
      class="navbar"
      :style="{
        height: navbarHeight,
        paddingTop: (safeAreaInsets?.top ?? 0) + 'px',
      }"
    >
      <!-- é¡¶éƒ¨å¯¼èˆªçš„ä¸»ä¸»ç»“æ„ï¼ŒåŒ…å«titleå’Œè¿”å›æŒ‰é’® -->
      <view
        class="nav-content"
        style="height: 40px"
      >
        <uni-icons
          type="left"
          size="20"
          @click="back"
        ></uni-icons>

        <view
          class="nav-title"
          :style="{
            transform: `translateX(calc(-50% - ${Math.min(242, Math.max(500 * (normalizedScrollTop / 100)))}rpx))`,
            transition: 'padding-left 0.3s ease',
          }"
        >
          åœ°å—è¯¦æƒ…
        </view>
      </view>
      
      <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
      <view
        class="content-wrapper"
        :style="{ paddingTop: navbarHeight }"
      >
        <!-- æ­¤å¤„ç•¥å»é¡µé¢ä¸­çš„å…¶ä»–æ ‡ç­¾ç»“æ„ -->
      </view>
      
    </view>
  </view>
</template>
```

```scss [æ ¸å¿ƒæ ·å¼]
.dikuai-details-page {
  position: relative; /* ä¸ºå†…éƒ¨å…ƒç´ åˆ›å»ºå®šä½ä¸Šä¸‹æ–‡, ç›®å‰æ²¡å‘ç°æœ‰ç”¨ */
  min-height: 100vh;  /* è¿™ä¸ªå…¶å®ä¹Ÿæ— å¿…è¦ */
  background: linear-gradient(180deg, #4fdba0 20%, #f9fafa 90%);

  // å›ºå®šå¯¼èˆªæ æ ·å¼
  .navbar {
    position: fixed;  /* âœ… è„±ç¦»æ–‡æ¡£æµ, ç›¸å¯¹äºæµè§ˆå™¨è§†å£å®šä½ï¼Œä¸æ˜¯ç›¸å¯¹äºå¤–å±‚å®¹å™¨ */
    top: 0;
    left: 0;
    right: 0;
    background: rgba(79, 219, 160);
    z-index: 9999;
    box-sizing: border-box;

    .nav-content {
      padding-left: 16rpx;
      position: relative;
      display: flex;
      align-items: center;
      // justify-content: center;

      .nav-title {
        font-size: 34rpx;
        font-weight: 600;
        color: #333;
        padding-bottom: 4rpx;
        position: fixed;
        left: 50%;
        transform: translateX(-50%);
      }
    }
  }
}
```

:::

è„±ç¦»æ–‡æ¡£æµçš„è¡¨ç°ï¼š

```css
.navbar {
  position: fixed;  /* âœ… è„±ç¦»æ–‡æ¡£æµ */
  top: 0;
  left: 0;
  right: 0;
}
```

**æ•ˆæœï¼š**

1. **ä¸å ç”¨åŸç©ºé—´**ï¼šåé¢çš„å…ƒç´ ä¼šå‘ä¸Šç§»åŠ¨å¡«è¡¥ä½ç½®
2. **ç‹¬ç«‹å±‚çº§**ï¼šåˆ›å»ºæ–°çš„å †å ä¸Šä¸‹æ–‡
3. **ç›¸å¯¹äºè§†å£**ï¼šä¸å—çˆ¶å…ƒç´ å½±å“
4. **ä¸éšé¡µé¢æ»šåŠ¨**ï¼šå›ºå®šåœ¨å±å¹•æŒ‡å®šä½ç½®

::: warning 

å› ä¸ºå¯¼èˆªæ æ ‡ç­¾ä½¿ç”¨äº†å›ºå®šå®šä½ï¼Œå› æ­¤éœ€è¦ä¸ºåé¢çš„æ•´ä½“é¡µé¢ç»“æ„è¿›è¡Œæ‰“åŒ…ï¼Œç„¶ååœ¨æ‰“åŒ…åçš„æ ‡ç­¾ä¸Šæ·»åŠ åŠ¨æ€å±æ€§ï¼š

```vue
<!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
<view
  class="content-wrapper"
  :style="{ paddingTop: navbarHeight }"
>
	<!-- æ­¤å¤„ç•¥å»åŸæœ‰æ ‡ç­¾ç»“æ„ -->
</view>
```

:::

## åŠ¨æ€å¯¼èˆªæ 

åŒæ ·çš„ã€é¦–å…ˆè¿˜æ˜¯æ„é€ ä¸€ä¸ªå¤„ç†é¡µé¢æ»šåŠ¨çš„é€»è¾‘ï¼š

::: code-group

```js [åˆæ­¥æ„é€ ]
// å¤„ç†é¡µé¢æ»šåŠ¨
const scrollTop = ref(0)

// åœ¨é¡µé¢ä¸­ç›´æ¥ä½¿ç”¨onPageScrollç”Ÿå‘½å‘¨æœŸ
onPageScroll(e => {
  scrollTop.value = e.scrollTop
  console.log('è·ç¦»é¡¶éƒ¨:', scrollTop.value, 'px /', scrollTop.value / 2 + 'rpx')
}) 

// å½“å‰ï¼Œè°ƒè¯•ä¿¡æ¯ç”Ÿæ•ˆäº†ï¼Œä½†æ˜¯è¿˜éœ€è¦è¿›ä¸€æ­¥å®Œå–„ï¼Œæˆ‘ä»¬éœ€è¦å®ƒè¿”å›100ä»¥å†…çš„æ•´æ•°
// å…¶ä½™æ»šåŠ¨çš„æ•°å€¼ä¸éœ€è¦è¿”å›ï¼Œå½“æ•°å€¼å¤§äº100æ—¶ï¼Œä»è¿”å›100ï¼
```

```ts [è¯¦ç»†éªŒè¯]
// å¤„ç†é¡µé¢æ»šåŠ¨
const navTitlePadding = ref(250)
const scrollTop = ref(0)
const normalizedScrollTop = ref(0) // æ ‡å‡†åŒ–åçš„æ»šåŠ¨å€¼ // [!code++]

// åœ¨é¡µé¢ä¸­ç›´æ¥ä½¿ç”¨onPageScrollç”Ÿå‘½å‘¨æœŸ
onPageScroll(e => {
  scrollTop.value = e.scrollTop
  const scrollTopRpx = e.scrollTop / 2
  
  // æ ‡å‡†åŒ–æ»šåŠ¨å€¼ï¼šé™åˆ¶åœ¨0-100ä¹‹é—´ï¼Œå–æ•´æ•° // [!code++]
  normalizedScrollTop.value = Math.min(100, Math.max(0, Math.round(scrollTopRpx))) // [!code++]
  
  console.log('ğŸ“Š æ»šåŠ¨ä¿¡æ¯:', {
    'åŸå§‹å€¼(px)': e.scrollTop,
    'è½¬æ¢å€¼(rpx)': scrollTopRpx.toFixed(1), // [!code++]
    'æ ‡å‡†åŒ–å€¼': normalizedScrollTop.value // [!code++]
  })
  
  // æ›´æ–°å¯¼èˆªæ å†…è¾¹è· // [!code++]
  updateNavPadding(normalizedScrollTop.value) // [!code++]
})

// æ›´æ–°å¯¼èˆªæ å†…è¾¹è·çš„å‡½æ•°
const updateNavPadding = (scrollValue: number) => {
  if (scrollValue <= 100) {
    const progress = scrollValue / 100
    navTitlePadding.value = 250 - (200 * progress)
  } else {
    navTitlePadding.value = 50
  }
}
```

```ts [ç®€åŒ–ç‰ˆæœ¬]
// å¤„ç†é¡µé¢æ»šåŠ¨
const navTitlePadding = ref(250) // 250 æ˜¯æ ‡ç­¾ä½ç½®çš„å®é™…åŸå§‹å€¼ // [!code--]
const normalizedScrollTop = ref(0) // æ ‡å‡†åŒ–åçš„æ»šåŠ¨å€¼(0-100)

// åœ¨é¡µé¢ä¸­ç›´æ¥ä½¿ç”¨onPageScrollç”Ÿå‘½å‘¨æœŸ
onPageScroll(e => {
  const scrollTopRpx = e.scrollTop / 2

  normalizedScrollTop.value = Math.min(100, Math.round(scrollTopRpx))

  console.log('ğŸ¯ æ ‡å‡†åŒ–æ»šåŠ¨å€¼:', normalizedScrollTop.value)

  // ä½¿ç”¨éçº¿æ€§å‡½æ•°æé«˜çµæ•åº¦ // [!code--]
  const progress = Math.pow(normalizedScrollTop.value / 100, 0.5) // å¹³æ–¹æ ¹å‡½æ•°ï¼Œå‰æœŸå˜åŒ–æ›´å¿« // [!code--]
  navTitlePadding.value = 250 - 200 * progress // [!code--]
})
```

:::

**å…³é”®ç‚¹è¯´æ˜ï¼š**

1. **`Math.round()`** - å››èˆäº”å…¥å–æ•´æ•°
2. **`Math.min(100, ...)`** - é™åˆ¶æœ€å¤§å€¼ä¸è¶…è¿‡100
3. **`Math.max(0, ...)`** - ç¡®ä¿æœ€å°å€¼ä¸å°äº0ï¼ˆè™½ç„¶æ»šåŠ¨å€¼ä¸ä¼šä¸ºè´Ÿï¼‰
4. **æ ‡å‡†åŒ–èŒƒå›´** - å§‹ç»ˆè¿”å›0-100çš„æ•´æ•°

ç„¶åï¼Œè°ƒç”¨ä½ç½®ï¼š

::: code-group

```html
<!-- å›ºå®šçš„å¯¼èˆªæ  -->
    <view
      class="navbar"
      :style="{
        height: navbarHeight,
        paddingTop: (safeAreaInsets?.top ?? 0) + 'px',
      }"
    >
      <!-- è¿™é‡Œå¯ä»¥æ·»åŠ å¯¼èˆªå†…å®¹ï¼Œæ¯”å¦‚è¿”å›æŒ‰é’® -->
      <view
        class="nav-content"
        style="height: 40px"
      >
        <uni-icons
          type="left"
          size="20"
          @click="back"
        ></uni-icons>

        <text
          class="nav-title"
          :style="{
            paddingLeft: Math.max(10, 250 - 500 * (normalizedScrollTop / 100)) + 'rpx',
            transition: 'padding-left 0.3s ease',
          }"
        >
          åœ°å—è¯¦æƒ…
        </text>
      </view>
    </view>
```

```css [æ ·å¼]
  // å›ºå®šå¯¼èˆªæ æ ·å¼
  .navbar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: rgba(79, 219, 160);
    z-index: 9999;
    box-sizing: border-box;

    .nav-content {
      padding-left: 16rpx;

      display: flex;
      align-items: center;
      // justify-content: center;

      .nav-title {
        font-size: 34rpx;
        font-weight: 600;
        color: #333;
        padding-bottom: 4rpx;
      }
    }
  }
```

:::

å…¶ä¸­ï¼š

```
<text
  class="nav-title"
  :style="{
    paddingLeft: Math.max(10, 250 - 500 * (normalizedScrollTop / 100)) + 'rpx',
    transition: 'padding-left 0.3s ease',
  }"
>
  åœ°å—è¯¦æƒ…
</text>
```

ä¸Šé¢çš„è¡Œå†…æ ·å¼æ•°å€¼æ˜¯å†™æ­»çš„ï¼Œéœ€è¦ä¼˜åŒ–ï¼š

::: code-group

```html
<view
  class="nav-title"
  :style="{
    transform: `translateX(calc(-50% - ${Math.min(242, Math.max(0, 500 * (normalizedScrollTop / 100)))}rpx))`,
    transition: 'padding-left 0.3s ease',
  }"
>
  åœ°å—è¯¦æƒ…
</view>
```

```css
.nav-content {
  padding-left: 16rpx;
  position: relative;
  display: flex;
  align-items: center;
  // justify-content: center;

  .nav-title {
    font-size: 34rpx;
    font-weight: 600;
    color: #333;
    padding-bottom: 4rpx;
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
  }
}
```

:::

ä¼˜åŒ–åçš„è¡Œå†…æ ·å¼è§£è¯»ï¼š

1. **æœ€å†…å±‚è®¡ç®—**ï¼š`250 * (normalizedScrollTop.value / 100)`

- `normalizedScrollTop.value / 100`ï¼šå°†0-100çš„æ»šåŠ¨å€¼è½¬æ¢ä¸º0-1çš„è¿›åº¦æ¯”ä¾‹
- `250 * è¿›åº¦`ï¼šè®¡ç®—åŸºç¡€ç§»åŠ¨è·ç¦»ï¼Œæœ€å¤§250rpx
- **ä½œç”¨**ï¼šæ ¹æ®æ»šåŠ¨è¿›åº¦è®¡ç®—è¦ç§»åŠ¨çš„è·ç¦»

2. **ä¸­å±‚ä¿æŠ¤**ï¼š`Math.max(0, ...)`

- ç¡®ä¿ç§»åŠ¨è·ç¦»**ä¸å°äº0rpx**
- é˜²æ­¢å‡ºç°è´Ÿå€¼å¯¼è‡´å¼‚å¸¸
- **ä½œç”¨**ï¼šè®¾ç½®ç§»åŠ¨è·ç¦»çš„æœ€å°å€¼

3. **å¤–å±‚é™åˆ¶**ï¼š`Math.min(121, ...)`

- ç¡®ä¿ç§»åŠ¨è·ç¦»**ä¸è¶…è¿‡121rpx**
- å³ä½¿æ»šåŠ¨åˆ°100ï¼Œæœ€å¤§ä¹Ÿåªç§»åŠ¨121rpx
- **ä½œç”¨**ï¼šè®¾ç½®ç§»åŠ¨è·ç¦»çš„æœ€å¤§å€¼

4. **æœ€ç»ˆå®šä½**ï¼š`calc(50% - ...rpx)`

- `50%`ï¼šç›¸å¯¹äºçˆ¶å®¹å™¨å®½åº¦çš„50%ä½ç½®
- `- ...rpx`ï¼šä»å±…ä¸­ä½ç½®å‘å·¦ç§»åŠ¨è®¡ç®—å‡ºçš„è·ç¦»
- **æ•´ä½“æ•ˆæœ**ï¼šå…ƒç´ ä»å±…ä¸­ä½ç½®é€æ¸å‘å·¦ç§»åŠ¨

æ•°å€¼å˜åŒ–è¿‡ç¨‹ï¼š

| æ»šåŠ¨å€¼ | è®¡ç®—æ­¥éª¤                                      | æœ€ç»ˆleftå€¼            |
| :----- | :-------------------------------------------- | :-------------------- |
| 0      | `Math.min(121, Math.max(0, 250*0))` = 0       | `calc(50% - 0rpx)`    |
| 25     | `Math.min(121, Math.max(0, 250*0.25))` = 62.5 | `calc(50% - 62.5rpx)` |
| 50     | `Math.min(121, Math.max(0, 250*0.5))` = 121   | `calc(50% - 121rpx)`  |
| 100    | `Math.min(121, Math.max(0, 250*1))` = 121     | `calc(50% - 121rpx)`  |

è§†è§‰æ•ˆæœï¼š

- **åˆå§‹**ï¼šå…ƒç´ å®Œç¾å±…ä¸­
- **æ»šåŠ¨ä¸­**ï¼šå…ƒç´ å‘å·¦å¹³æ»‘ç§»åŠ¨
- **æ»šåŠ¨åˆ°50+**ï¼šå…ƒç´ åœåœ¨è·ä¸­å¿ƒ121rpxçš„ä½ç½®

## è‡ªå®šä¹‰å¯¼èˆªç»„ä»¶

ä¹‹å‰ï¼Œæ‰‹å†™çš„è‡ªå®šä¹‰å¯¼èˆªç»„ä»¶ï¼Œå®Œæ•´çš„è¿˜åŸäº†è®¾è®¡ç¨¿ï¼Œä½†æ˜¯ï¼Œé¡µé¢æ»šåŠ¨æ—¶çœ‹å‡ºæ¥é—®é¢˜äº† â€”â€” æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰å¯¼èˆªç»„ä»¶åœ¨å†…ï¼Œéƒ½ä¼šè·Ÿéšé¡µé¢æ»šåŠ¨ï¼Œä¸”æ»šåŠ¨å†…å®¹åœ¨æ»šåŠ¨æ—¶ä¸é¡¶éƒ¨çŠ¶æ€æ é‡å ï¼

éœ€è¦å¯¹å…¶è¿›è¡Œå®šä½æ”¹é€ ï¼Œå¹¶è®°å½•å®šä½æ–¹å¼ï¼š

:::code-group æ”¹é€ å‰ - ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

```vue [æ ‡ç­¾ç»“æ„]
<template>
  <view
    class="navbar"
    :style="{ paddingTop: safeAreaInsets?.top + 'px' }"
  >
    <!-- logoæ–‡å­— -->
    <view class="logo">
      <image
        class="logo-image"
        src="@/static/images/yun-logo.png"
      ></image>
      <text class="logo-image-text">äº‘å³°å†œæœ</text>
      <!-- <text class="logo-text">å¿«æ· Â· æ˜“ç”¨ Â· é«˜æ•ˆ</text> -->
    </view>

    <!-- æœç´¢æ¡ -->
    <!-- <view class="search">
      <text class="icon-search">æœç´¢å•†å“</text>
      <text class="icon-scan"></text>
    </view> -->

    <!-- navBar-bottom -->
    <view class="navbar-bottom">
      <div class="tianqi">
        <text class="tianqi-temp">{{ weatherStore.weatherData?.tem }}Â°</text>
        <text class="tianqi-desc">æ™´</text>
        <image
          class="tianqi-icon"
          src="@/static/icon/å¤©æ°”-æ™´.svg"
        ></image>
      </div>
      <div class="location">
        <text class="iconfont location-icon">&#xe790;</text>
        <text class="info-text">ç‰¡ä¸¹åŒº</text>
      </div>
      <div class="shidu">
        <text class="iconfont shidu-icon">&#xe682;</text>
        <text class="info-text">65%</text>
      </div>
      <div class="air">
        <text class="iconfont air-icon">&#xe60e;</text>
        <text class="info-text air-text">è‰¯å¥½</text>
      </div>
    </view>
  </view>
</template>
```

```scss [æ ·å¼]
<style lang="scss">
/* è‡ªå®šä¹‰å¯¼èˆªæ¡ */
.navbar {
  background-image: url(@/static/images/svg/background.svg);
  background-size: cover;
  position: relative;
  display: flex;
  flex-direction: column;
  padding-top: 10rpx;

  // å…¶ä»–æ ·å¼
}
</style>
```

:::

æ”¹é€ åï¼Œåœ¨åŸæœ‰ç»„ä»¶ç»“æ„å¤–å±‚åŒ…è£¹ä¸€å±‚çˆ¶å®¹å™¨ï¼š

::: code-group ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

```vue [æ ‡ç­¾ç»“æ„]
<template>
  <view class="viewport">
    <CustomNavbar ref="navbarRef"></CustomNavbar>
    <view
      class="page-content"
      :style="{
        paddingTop: dynamicPaddingTop + 'px',
      }"
    >
      <!-- æ­¤å¤„ç•¥å»å…¶ä»–æ ‡ç­¾ç»“æ„ -->
    </view>
  </view>
</template>
```

```scss [æ ·å¼]
<style scoped lang="scss">
.viewport {
  height: 100%;
  display: flex;
  background-color: #f5f7fa;
  flex-direction: column;
  overflow-x: hidden;

  .page-content {
    // flex: 1ï¼Œå æ®æ‰€æœ‰å‰©ä½™ç©ºé—´
    flex: 1;
    // å› ä¸ºæ»šåŠ¨æœ¬æ¥å°±æ˜¯å®æ—¶çš„ï¼Œä¸”å±æ€§æ²¡æœ‰å‘ç”Ÿç¦»æ•£å˜åŒ–ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿‡æ¸¡æ•ˆæœ
    // transition: padding-top 0.3s ease-out; // æ·»åŠ è¿‡æ¸¡æ•ˆæœ
  }

  .main-list {
    font-size: 30rpx;
    color: #333;
    font-weight: 600;
    display: flex;
    padding: 0 30rpx;
    margin: 20rpx 0;
  }
}
</style>
```

:::

å…³é”®æ”¹åŠ¨ï¼Œå…¶å®å°±æ˜¯å¤–å±‚åŒ…è£¹çˆ¶å®¹å™¨ï¼Œç„¶åçˆ¶å®¹å™¨å›ºå®šå®šä½ï¼ä¹Ÿå°±è¯´ï¼ŒåŒ…ä¸åŒ…çˆ¶å®¹å™¨ï¼Œå¾ˆå¯èƒ½æ²¡å•¥å½±å“ 0.0 

ç›¸æ¯”ä¹‹ä¸‹ï¼Œä½¿ç”¨çˆ¶å®¹å™¨åŒ…ä¸€å±‚ï¼Œæ›´ä¸»è¦çš„ç›®çš„åœ¨äºï¼šä¸ºäº†åŒºåˆ†`navbar æ ‡ç­¾`å’Œ`å…¶ä»–æ ‡ç­¾`ã€‚

ç»è¿‡ä¸Šè¿°å®šä½å®‰æ’ä¹‹åï¼Œè°ƒç”¨é¡µé¢çš„å…¶ä»–`å…¶ä»–æ ‡ç­¾`ï¼Œå°±éœ€è¦ä¸ºå…¶è®¾ç½®ä¸€ä¸ªåŠ¨æ€çš„`padding-top`ï¼Œå¦åˆ™ï¼Œé¡µé¢ç»“æ„ä¼šè¢«ç›¸å¯¹è§†å£å›ºå®šçš„navbarç»„ä»¶é®æŒ¡ï¼

## è‡ªå®šä¹‰å¯¼èˆªç»„ä»¶çš„åŠ¨æ€å®ç°

æ€è·¯ï¼šé€šè¿‡è°ƒç”¨é¡µé¢æ„é€ æ»šåŠ¨å‡½æ•°ï¼Œè¾“å‡ºæ ‡å‡†åŒ–æ•°å€¼ï¼Œç„¶åå……åˆ†ã€å·§å¦™çš„åˆ©ç”¨è¯¥æ•°å€¼ï¼

æ”¹é€ å‰ï¼š

::: code-group 

```vue [è°ƒç”¨é¡µé¢]
<template>
  <view class="viewport">
    <CustomNavbar ref="navbarRef"></CustomNavbar>
    <view
      class="page-content"
      :style="{ paddingTop: paddingTop + 'px' }"
    >
      <indexVideo></indexVideo>
      <text class="main-list">å®æ—¶ç”»é¢ï¼ˆ4ï¼‰</text>

      <videoList></videoList>
      <text class="main-list">å¼‚å¸¸ä¿¡æ¯ï¼ˆ2ï¼‰</text>
      <infoList></infoList>
      <WeatherStation></WeatherStation>
    </view>
  </view>
</template>

<script setup lang="ts">
import { onPageScroll } from '@dcloudio/uni-app'
import { onMounted, ref } from 'vue'
import CustomNavbar from './components/CustomNavbar.vue'
import indexVideo from './components/indexVideo.vue'
import infoList from './components/infoList.vue'
import videoList from './components/videoList.vue'
import WeatherStation from './components/weatherStation.vue'
const navbarRef = ref()
const paddingTop = ref() // é»˜è®¤å€¼

// å¤„ç†é¡µé¢æ»šåŠ¨
const navBarPadding = ref()
const normalizedScrollTop = ref(0) // æ ‡å‡†åŒ–åçš„æ»šåŠ¨å€¼(0-100)

// åœ¨é¡µé¢ä¸­ç›´æ¥ä½¿ç”¨onPageScrollç”Ÿå‘½å‘¨æœŸ
onPageScroll(e => {
  const scrollTopRpx = e.scrollTop / 2

  normalizedScrollTop.value = Math.min(100, Math.round(scrollTopRpx))

  console.log('ğŸ¯ æ ‡å‡†åŒ–æ»šåŠ¨å€¼:', normalizedScrollTop.value)
})

onMounted(() => {
  if (navbarRef.value?.navbarHeight) {
    paddingTop.value = navbarRef.value.navbarHeight
  }
})
</script>

<style scoped lang="scss">
.viewport {
  height: 100%;
  display: flex;
  background-color: #f5f7fa;
  flex-direction: column;
  overflow-x: hidden; /* é˜²æ­¢æ¨ªå‘æº¢å‡º */

  .main-list {
    font-size: 30rpx;
    color: #333;
    font-weight: 600;
    display: flex;
    padding: 0 30rpx;
  }
}
</style>
```

```vue [å¯¼èˆªç»„ä»¶]
<script setup lang="ts">
import { computed } from 'vue'
// è·å–å±å¹•è¾¹ç•Œåˆ°å®‰å…¨åŒºåŸŸè·ç¦»
const { safeAreaInsets } = uni.getSystemInfoSync()
// è®¡ç®—å¯¼èˆªæ æ€»é«˜åº¦
const navbarHeight = computed(() => {
  const topInset = safeAreaInsets?.top || 0
  const contentHeight = 120 // å¯¼èˆªæ å†…å®¹é«˜åº¦ï¼Œæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´
  return topInset + contentHeight
})

// æš´éœ²é«˜åº¦ç»™çˆ¶ç»„ä»¶
defineExpose({
  navbarHeight: navbarHeight.value,
})
console.log(safeAreaInsets)

import { useWeatherStore } from '@/stores'
const weatherStore = useWeatherStore() // å…¨å±€å¤©æ°”çŠ¶æ€
</script>

<template>
  <view
    class="navbar-container"
    :style="{ height: navbarHeight + 'px' }"
  >
    <view
      class="navbar"
      :style="{ paddingTop: safeAreaInsets?.top + 'px' }"
    >
      <!-- logoæ–‡å­— -->
      <view class="logo">
        <image
          class="logo-image"
          src="@/static/images/yun-logo.png"
        ></image>
        <text class="logo-image-text">äº‘å³°å†œæœ</text>
        <!-- <text class="logo-text">å¿«æ· Â· æ˜“ç”¨ Â· é«˜æ•ˆ</text> -->
      </view>

      <!-- navBar-bottom -->
      <view class="navbar-bottom">
        <view class="tianqi">
          <text class="tianqi-temp">{{ weatherStore.weatherData?.tem }}Â°</text>
          <text class="tianqi-desc">æ™´</text>
          <image
            class="tianqi-icon"
            src="@/static/icon/å¤©æ°”-æ™´.svg"
          ></image>
        </view>
        <view class="location">
          <text class="iconfont location-icon">&#xe790;</text>
          <text class="info-text">ç‰¡ä¸¹åŒº</text>
        </view>
        <view class="shidu">
          <text class="iconfont shidu-icon">&#xe682;</text>
          <text class="info-text">65%</text>
        </view>
        <view class="air">
          <text class="iconfont air-icon">&#xe60e;</text>
          <text class="info-text air-text">è‰¯å¥½</text>
        </view>
      </view>
    </view>
  </view>
</template>
```

:::

å½“è·å–æ ‡å‡†åŒ–çš„æ»šåŠ¨æ•°å€¼åï¼Œæˆ‘å¸Œæœ›å°†è¯¥æ•°å€¼ åŒæ—¶ä¸ ref="navbarRef" å’Œ :style="{ paddingTop: paddingTop + 'px' }"  è¿›è¡Œå…³è”ï¼

ä½†æ­£å¦‚ä¸Šé¢å±•ç¤ºçš„é‚£æ ·ï¼Œä¸å­ç»„ä»¶ ref="navbarRef"çš„å…³è”ç›®å‰è¿˜ä¸æ˜¯å“åº”å¼çš„ã€‚

**ä¸»è¦é—®é¢˜ï¼š**

1. **å­ç»„ä»¶æš´éœ²çš„ navbarHeight ä¸æ˜¯å“åº”å¼çš„** - æ‚¨ä½¿ç”¨äº† `navbarHeight.value` ç›´æ¥æš´éœ²å€¼ï¼Œè€Œä¸æ˜¯å“åº”å¼å¼•ç”¨
2. **çˆ¶ç»„ä»¶æ²¡æœ‰å°†æ»šåŠ¨å€¼ä¼ é€’ç»™å­ç»„ä»¶** - éœ€è¦æ·»åŠ  props æˆ–æ–¹æ³•è°ƒç”¨

å› æ­¤ï¼Œéœ€è¦ä¿®æ”¹å­ç»„ä»¶ï¼š

::: code-group

```vue [å­ç»„ä»¶]
<script setup lang="ts">
import { computed, ref } from 'vue'

// è·å–å±å¹•è¾¹ç•Œåˆ°å®‰å…¨åŒºåŸŸè·ç¦»
const { safeAreaInsets } = uni.getSystemInfoSync()

// è®¡ç®—å¯¼èˆªæ æ€»é«˜åº¦ - ä½¿ç”¨ computed ä¿æŒå“åº”å¼
const navbarHeight = computed(() => {
  const topInset = safeAreaInsets?.top || 0
  const contentHeight = 120 // å¯¼èˆªæ å†…å®¹é«˜åº¦
  return topInset + contentHeight
})

// æ·»åŠ å“åº”å¼çš„æ»šåŠ¨çŠ¶æ€
const scrollState = ref(0)

// æ¥æ”¶æ»šåŠ¨å€¼çš„æ–¹æ³•
const updateScrollState = (scrollValue: number) => {
  scrollState.value = scrollValue
  console.log('ğŸ“Š å¯¼èˆªæ æ”¶åˆ°æ»šåŠ¨å€¼:', scrollValue)
  // åœ¨è¿™é‡Œå¯ä»¥æ ¹æ®æ»šåŠ¨å€¼å®ç°å¯¼èˆªæ çš„æ ·å¼å˜åŒ–
  // ä¾‹å¦‚ï¼šèƒŒæ™¯é€æ˜åº¦ã€æ ‡é¢˜æ˜¾ç¤ºç­‰
}

// æš´éœ²ç»™çˆ¶ç»„ä»¶
defineExpose({
  navbarHeight,
  updateScrollState
})

import { useWeatherStore } from '@/stores'
const weatherStore = useWeatherStore()
</script>

<template>
  <view
    class="navbar-container"
    :style="{ 
      height: navbarHeight + 'px',
      // æ ¹æ®æ»šåŠ¨å€¼æ·»åŠ åŠ¨æ€æ ·å¼
      opacity: 1 - scrollState / 100,
      background: scrollState > 50 ? 'rgba(255,255,255,0.9)' : 'transparent'
    }"
  >
    <view
      class="navbar"
      :style="{ paddingTop: safeAreaInsets?.top + 'px' }"
    >
      <!-- åŸæœ‰å†…å®¹ä¿æŒä¸å˜ -->
      <view class="logo">
        <image
          class="logo-image"
          src="@/static/images/yun-logo.png"
        ></image>
        <text class="logo-image-text">äº‘å³°å†œæœ</text>
      </view>

      <view class="navbar-bottom">
        <view class="tianqi">
          <text class="tianqi-temp">{{ weatherStore.weatherData?.tem }}Â°</text>
          <text class="tianqi-desc">æ™´</text>
          <image
            class="tianqi-icon"
            src="@/static/icon/å¤©æ°”-æ™´.svg"
          ></image>
        </view>
        <view class="location">
          <text class="iconfont location-icon">&#xe790;</text>
          <text class="info-text">ç‰¡ä¸¹åŒº</text>
        </view>
        <view class="shidu">
          <text class="iconfont shidu-icon">&#xe682;</text>
          <text class="info-text">65%</text>
        </view>
        <view class="air">
          <text class="iconfont air-icon">&#xe60e;</text>
          <text class="info-text air-text">è‰¯å¥½</text>
        </view>
      </view>
    </view>
  </view>
</template>
```

```vue [è°ƒç”¨é¡µé¢]
<template>
  <view class="viewport">
    <CustomNavbar ref="navbarRef"></CustomNavbar>
    <view
      class="page-content"
      :style="{ 
        paddingTop: dynamicPaddingTop + 'px'
      }"
    >
      <indexVideo></indexVideo>
      <text class="main-list">å®æ—¶ç”»é¢ï¼ˆ4ï¼‰</text>
      <videoList></videoList>
      <text class="main-list">å¼‚å¸¸ä¿¡æ¯ï¼ˆ2ï¼‰</text>
      <infoList></infoList>
      <WeatherStation></WeatherStation>
    </view>
  </view>
</template>

<script setup lang="ts">
import { onPageScroll } from '@dcloudio/uni-app'
import { onMounted, ref, computed } from 'vue'
import CustomNavbar from './components/CustomNavbar.vue'
import indexVideo from './components/indexVideo.vue'
import infoList from './components/infoList.vue'
import videoList from './components/videoList.vue'
import WeatherStation from './components/weatherStation.vue'

const navbarRef = ref()
const normalizedScrollTop = ref(0)

// åŠ¨æ€è®¡ç®—paddingTopï¼Œä¸å¯¼èˆªæ é«˜åº¦åŒæ­¥
const dynamicPaddingTop = computed(() => {
  if (!navbarRef.value?.navbarHeight) return 0
  return navbarRef.value.navbarHeight
})

// å¤„ç†é¡µé¢æ»šåŠ¨
onPageScroll(e => {
  const scrollTopRpx = e.scrollTop / 2
  normalizedScrollTop.value = Math.min(100, Math.round(scrollTopRpx))
  
  console.log('ğŸ¯ æ ‡å‡†åŒ–æ»šåŠ¨å€¼:', normalizedScrollTop.value)
  
  // å°†æ»šåŠ¨å€¼ä¼ é€’ç»™å­ç»„ä»¶
  if (navbarRef.value?.updateScrollState) {
    navbarRef.value.updateScrollState(normalizedScrollTop.value)
  }
})

onMounted(() => {
  // ç­‰å¾…ä¸‹ä¸€å¸§ç¡®ä¿ç»„ä»¶å·²æ¸²æŸ“
  setTimeout(() => {
    if (navbarRef.value?.navbarHeight) {
      console.log('ğŸ“ åˆå§‹å¯¼èˆªæ é«˜åº¦:', navbarRef.value.navbarHeight)
    }
  }, 100)
})
</script>

<style scoped lang="scss">
.viewport {
  height: 100%;
  display: flex;
  background-color: #f5f7fa;
  flex-direction: column;
  overflow-x: hidden;

  .page-content {
    flex: 1;
    transition: padding-top 0.3s ease-out; // æ·»åŠ è¿‡æ¸¡æ•ˆæœ
  }

  .main-list {
    font-size: 30rpx;
    color: #333;
    font-weight: 600;
    display: flex;
    padding: 0 30rpx;
    margin: 20rpx 0;
  }
}
</style>
```

:::

**å…³é”®æ”¹è¿›ç‚¹ï¼š**

1. **å­ç»„ä»¶å“åº”å¼æš´éœ²**ï¼šä½¿ç”¨ `navbarHeight` è€Œä¸æ˜¯ `navbarHeight.value`
2. **æ·»åŠ æ»šåŠ¨çŠ¶æ€**ï¼šåœ¨å­ç»„ä»¶ä¸­åˆ›å»º `scrollState` æ¥æ¥æ”¶å’Œå¤„ç†æ»šåŠ¨å€¼
3. **åŒå‘é€šä¿¡**ï¼šçˆ¶ç»„ä»¶é€šè¿‡ `updateScrollState` æ–¹æ³•å°†æ»šåŠ¨å€¼ä¼ é€’ç»™å­ç»„ä»¶
4. **åŠ¨æ€æ ·å¼**ï¼šåœ¨å­ç»„ä»¶å’Œçˆ¶ç»„ä»¶ä¸­éƒ½æ ¹æ®æ»šåŠ¨å€¼åº”ç”¨åŠ¨æ€æ ·å¼
5. **å»¶è¿Ÿè·å–é«˜åº¦**ï¼šä½¿ç”¨ `setTimeout` ç¡®ä¿åœ¨ç»„ä»¶æ¸²æŸ“å®Œæˆåè·å–é«˜åº¦

è¿™æ ·å°±èƒ½å®ç°æˆ‘ä»¬æƒ³è¦çš„ï¼šæ»šåŠ¨æ•°å€¼åŒæ—¶ä¸ `navbarRef` å’Œ `paddingTop` æ ·å¼è¿›è¡Œå…³è”ï¼Œå¹¶ä¸”æ˜¯å“åº”å¼çš„ã€‚

æ¥ä¸‹æ¥ï¼Œå°±æ˜¯å¯¹ä¸€äº›ç»†èŠ‚è¿›è¡Œè°ƒè¯•ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬åŠ¨ç”»æ ·å¼ã€ä»¥åŠï¼Œåˆ†åˆ«ä¸ºå¯¼èˆªæ ç»„ä»¶è®¾ç½®åˆå§‹å’Œç¼©æ”¾åçš„é«˜åº¦ï¼

::: warning ğŸ“ æ€»ç»“

**computed ä¿æŒå“åº”å¼çš„æ¡ä»¶æ˜¯ï¼š**

- ä¾èµ–çš„æ•°æ®æœ¬èº«æ˜¯å“åº”å¼çš„ï¼ˆæ¥è‡ª dataã€propsã€vuex ç­‰ï¼‰
- ä½¿ç”¨æ­£ç¡®çš„æ•°æ®æ›´æ–°æ–¹å¼
- ä¸åŒ…å«å¼‚æ­¥æ“ä½œæˆ–å‰¯ä½œç”¨

:::

## ğŸ“Š å‚æ•°é…ç½®åˆ†æ

::: details ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

```js
const sensitivityConfig = {
  triggerThreshold: 94,     // å¾ˆä½çš„å€¼ï¼Œéå¸¸çµæ•ï¼
  heightRange: {
    expanded: 120,          // å±•å¼€é«˜åº¦
    collapsed: 46,          // æ”¶èµ·é«˜åº¦
  },
  transitionCurve: 0.6,     // å¾ˆå°çš„æŒ‡æ•°ï¼Œåˆå§‹å“åº”æå¿«
}
```



**å†…å®¹åŒºåŸŸé«˜åº¦å·®ï¼š** `120 - 46 = 74px`

ğŸ§® è¯¦ç»†è®¡ç®—è¿‡ç¨‹

å‡è®¾å®‰å…¨åŒºåŸŸé¡¶éƒ¨æ’å…¥ä¸º 44pxï¼ˆiPhone æ ‡å‡†ï¼‰

```js
const topInset = 44

baseNavbarHeight = 44 + 120 = 164px  // å®Œå…¨å±•å¼€
minNavbarHeight = 44 + 46 = 90px     // å®Œå…¨æ”¶èµ·
æ€»é«˜åº¦å˜åŒ–èŒƒå›´ï¼š164px â†’ 90pxï¼ˆå˜åŒ–74pxï¼‰
```

è®¡ç®—å‡ ä¸ªå…³é”®ç‚¹çš„å€¼ï¼š

1. æ»šåŠ¨å€¼ = 20pxï¼ˆè½»å¾®æ»šåŠ¨ï¼‰

```js
progress = Math.min(20 / 94, 1) = 0.213
sensitiveProgress = Math.pow(0.213, 0.6) â‰ˆ 0.453
height = 90 + (164 - 90) Ã— (1 - 0.453)
       = 90 + 74 Ã— 0.547 â‰ˆ 130.5px
```



**æ•ˆæœï¼š** è½»å¾®æ»šåŠ¨20pxï¼Œé«˜åº¦ä»164px â†’ 130.5pxï¼Œä¸‹é™33.5pxï¼

2. æ»šåŠ¨å€¼ = 47pxï¼ˆä¸€åŠé˜ˆå€¼ï¼‰

```js
progress = Math.min(47 / 94, 1) = 0.5
sensitiveProgress = Math.pow(0.5, 0.6) â‰ˆ 0.660
height = 90 + 74 Ã— (1 - 0.660)
       = 90 + 74 Ã— 0.340 â‰ˆ 115.2px
```

**æ•ˆæœï¼š** æ»šåŠ¨ä¸€åŠè·ç¦»ï¼Œé«˜åº¦å·²ä¸‹é™48.8pxï¼

3. æ»šåŠ¨å€¼ = 94pxï¼ˆè¾¾åˆ°é˜ˆå€¼ï¼‰

```js
progress = Math.min(94 / 94, 1) = 1
sensitiveProgress = Math.pow(1, 0.6) = 1
height = 90 + 74 Ã— (1 - 1) = 90px
```

**æ•ˆæœï¼š** å®Œå…¨æ”¶ç¼©åˆ°æœ€å°é«˜åº¦

ğŸ“ˆ å®Œæ•´å“åº”æ›²çº¿

| æ»šåŠ¨å€¼ | è¿›åº¦  | çµæ•è¿›åº¦ | å¯¼èˆªæ é«˜åº¦          | é«˜åº¦å˜åŒ– |
| :----- | :---- | :------- | :------------------ | :------- |
| 0px    | 0     | 0        | 164px               | èµ·å§‹çŠ¶æ€ |
| 10px   | 0.106 | 0.251    | 90+74Ã—0.749â‰ˆ145.4px | â†˜18.6px  |
| 20px   | 0.213 | 0.453    | 90+74Ã—0.547â‰ˆ130.5px | â†˜33.5px  |
| 30px   | 0.319 | 0.563    | 90+74Ã—0.437â‰ˆ122.3px | â†˜41.7px  |
| 47px   | 0.5   | 0.660    | 90+74Ã—0.340â‰ˆ115.2px | â†˜48.8px  |
| 70px   | 0.745 | 0.818    | 90+74Ã—0.182â‰ˆ103.5px | â†˜60.5px  |
| 94px   | 1     | 1        | 90px                | â†˜74px    |

ğŸ¯ çµæ•åº¦è®¾è®¡ç‰¹ç‚¹

è¶…çµæ•å“åº”ï¼š

- **é˜ˆå€¼ä»…94px**ï¼šæ»šåŠ¨ä¸åˆ°ä¸€å±å°±å®Œæˆå…¨éƒ¨åŠ¨ç”»
- **åˆå§‹å“åº”æå¿«**ï¼šå‰20pxæ»šåŠ¨å°±å®Œæˆ45%çš„é«˜åº¦å˜åŒ–
- **æŒ‡æ•°æ›²çº¿0.6**ï¼šè®©å‰æ®µå˜åŒ–æ›´å‰§çƒˆï¼Œåæ®µå¹³ç¼“

ç”¨æˆ·ä½“éªŒï¼š

- **å³æ—¶åé¦ˆ**ï¼šç”¨æˆ·è½»è½»æ»šåŠ¨å°±èƒ½çœ‹åˆ°æ˜æ˜¾æ•ˆæœ
- **å¿«é€Ÿå®Œæˆ**ï¼šä¸éœ€è¦å¤§é‡æ»šåŠ¨å°±èƒ½çœ‹åˆ°å®Œæ•´åŠ¨ç”»
- **è§†è§‰èˆ’é€‚**ï¼šæŒ‡æ•°æ›²çº¿è®©åŠ¨ç”»æœ‰"ç¼“å…¥"æ•ˆæœ

æ€»ç»“

ä½ çš„é…ç½®åˆ›é€ äº†**æå…¶çµæ•çš„å“åº”å¼å¯¼èˆªæ **ï¼š

- **å‰10pxæ»šåŠ¨**ï¼šå®Œæˆ25%çš„é«˜åº¦å˜åŒ–
- **å‰20pxæ»šåŠ¨**ï¼šå®Œæˆ45%çš„é«˜åº¦å˜åŒ–
- **94pxå†…å®Œæˆ**ï¼šå…¨éƒ¨æ”¶ç¼©åŠ¨ç”»

è¿™æ ·çš„è®¾è®¡é€‚åˆè¿½æ±‚**å³æ—¶è§†è§‰åé¦ˆ**çš„åº”ç”¨åœºæ™¯ï¼ç”¨æˆ·è½»è½»ä¸€åŠ¨å°±èƒ½è·å¾—å¼ºçƒˆçš„äº¤äº’åé¦ˆã€‚ğŸš€

:::

::: details å…³äº-triggerThreshold

`triggerThreshold` æ˜¯**æ»šåŠ¨é˜ˆå€¼**ï¼Œå®ƒå†³å®šäº†å¯¼èˆªæ æ”¶ç¼©åŠ¨ç”»çš„"å®Œæˆè·ç¦»"ã€‚

ğŸ¯ ç®€å•ç†è§£

`triggerThreshold = 94` æ„å‘³ç€ï¼š

- **å½“ç”¨æˆ·æ»šåŠ¨åˆ° 94px æ—¶**ï¼Œå¯¼èˆªæ å®Œå…¨æ”¶ç¼©åˆ°æœ€å°é«˜åº¦
- **æ»šåŠ¨ 0-94px çš„è¿‡ç¨‹**ï¼Œå¯¼èˆªæ é«˜åº¦ä»æœ€å¤§å¹³æ»‘è¿‡æ¸¡åˆ°æœ€å°
- **è¶…è¿‡ 94px å**ï¼Œå¯¼èˆªæ ä¿æŒæœ€å°é«˜åº¦ä¸å˜

ğŸ“Š å¯è§†åŒ–ç†è§£

```
æ»šåŠ¨è·ç¦»:   0px â”€â”€â”€â”€ 47px â”€â”€â”€â”€ 94px â”€â”€â”€â”€ 188px â”€â”€â”€â”€ âˆ
å¯¼èˆªæ é«˜åº¦: 164px â†’ 115px â†’  90px  â†’   90px   â†’  90px
          å®Œå…¨å±•å¼€    åŠæ”¶ç¼©   å®Œå…¨æ”¶èµ·   ä¿æŒæ”¶èµ·   ä¿æŒæ”¶èµ·
```

ğŸ”§ æŠ€æœ¯åŸç†

```js
const progress = Math.min(scrollState.value / sensitivityConfig.triggerThreshold, 1)
// å½“ scrollState.value = 94 æ—¶ï¼š
// progress = Math.min(94 / 94, 1) = 1 â†’ åŠ¨ç”»å®Œæˆ100%

// å½“ scrollState.value = 47 æ—¶ï¼š
// progress = Math.min(47 / 94, 1) = 0.5 â†’ åŠ¨ç”»å®Œæˆ50%

// å½“ scrollState.value = 188 æ—¶ï¼š
// progress = Math.min(188 / 94, 1) = Math.min(2, 1) = 1 â†’ åŠ¨ç”»å®Œæˆ100%
```



ğŸšï¸ é˜ˆå€¼çš„å½±å“

å°é˜ˆå€¼ï¼ˆå¦‚ 94ï¼‰ï¼š

```js
triggerThreshold: 94 // é«˜çµæ•åº¦
```

- **åŠ¨ç”»å®Œæˆå¿«**ï¼šæ»šåŠ¨94pxå°±å®Œæˆå…¨éƒ¨æ”¶ç¼©
- **å“åº”çµæ•**ï¼šè½»å¾®æ»šåŠ¨å°±æœ‰æ˜æ˜¾æ•ˆæœ
- **é€‚åˆ**ï¼šè¿½æ±‚å³æ—¶åé¦ˆçš„åœºæ™¯

å¤§é˜ˆå€¼ï¼ˆå¦‚ 200ï¼‰ï¼š

```js
triggerThreshold: 200 // ä½çµæ•åº¦
```

- **åŠ¨ç”»å®Œæˆæ…¢**ï¼šéœ€è¦æ»šåŠ¨200pxæ‰å®Œå…¨æ”¶ç¼©
- **å“åº”å¹³ç¼“**ï¼šéœ€è¦æ›´å¤šæ»šåŠ¨æ‰èƒ½çœ‹åˆ°å˜åŒ–
- **é€‚åˆ**ï¼šè¿½æ±‚å¹³æ»‘è¿‡æ¸¡çš„åœºæ™¯

ğŸ’¡ å®é™…æ„ä¹‰

åœ¨ä½ çš„é…ç½®ä¸­ï¼š

- **ç”¨æˆ·æ»šåŠ¨ä¸åˆ° 94px**ï¼ˆçº¦1/4å±ï¼‰ï¼Œå¯¼èˆªæ å°±å®Œæˆä»å±•å¼€åˆ°æ”¶èµ·çš„å…¨è¿‡ç¨‹
- **è¿™åˆ›é€ äº†æå¿«çš„è§†è§‰åé¦ˆ**ï¼Œç”¨æˆ·è½»è½»ä¸€æ»‘å°±èƒ½çœ‹åˆ°å®Œæ•´åŠ¨ç”»
- **è¶…è¿‡ 94px å**ï¼Œå¯¼èˆªæ ä¿æŒæœ€å°é«˜åº¦ï¼Œä¸ä¼šæ— é™æ”¶ç¼©

æ‰€ä»¥ `triggerThreshold` æœ¬è´¨ä¸Šæ˜¯**æ§åˆ¶åŠ¨ç”»å“åº”é€Ÿåº¦çš„"çµæ•åº¦å¼€å…³"**ï¼

:::

::: details å…³äº`scrollState`

é™¤æ­¤ä»¥å¤–ï¼Œé¡µé¢ä¸­è¿˜å¤šå¤„ä½¿ç”¨äº†å“åº”å¼æ•°å€¼`scrollState`  ï¼Œ è¿™ä¸ªå€¼çš„æ¥æºä¸ºçˆ¶ç»„ä»¶çš„æ»šåŠ¨æ•°å€¼ä¼ é€’ï¼

```vue
<!-- logoæ–‡å­— -->
<view
  class="logo"
  :style="{
    transform: `translateY(-${Math.min(scrollState * 0.4, 10)}px)`,
  }"
>
  <image
    class="logo-image"
    src="@/static/images/yun-logo.png"
  ></image>
  <text class="logo-image-text">äº‘å³°å†œæœ</text>
  <!-- <text class="logo-text">å¿«æ· Â· æ˜“ç”¨ Â· é«˜æ•ˆ</text> -->
</view>

<!-- navBar-bottom -->
<view
  class="navbar-bottom"
  :style="{
    transform: `translateY(-${scrollState * 0.8}px)`,
    opacity: 1 - scrollState / 30,
  }"
>
  <!-- æ¸©åº¦å‘å³ç§»åŠ¨ï¼Œå¹…åº¦å¤§ -->
  <view
    class="tianqi"
    :style="{
      transform: `scale(${1 - scrollState / 80}) translateX(${scrollState * 3.5}px)`,
      opacity: 1 - scrollState / 25,
    }"
  >
    <text class="tianqi-temp">{{ weatherStore.weatherData?.tem }}Â°</text>
    <text class="tianqi-desc">æ™´</text>
    <image
      class="tianqi-icon"
      src="@/static/icon/å¤©æ°”-æ™´.svg"
    ></image>
  </view>

  <!-- ä½ç½®ä¿¡æ¯å‘å³ç§»åŠ¨ï¼Œå¹…åº¦å° -->
  <view
    class="location"
    :style="{
      transform: `scale(${1 - scrollState / 100}) translateX(${scrollState * 1.8}px)`,
      opacity: 1 - scrollState / 35,
    }"
  >
    <text class="iconfont location-icon">&#xe790;</text>
    <text class="info-text">ç‰¡ä¸¹åŒº</text>
  </view>

  <!-- æ¹¿åº¦å‘å·¦ç§»åŠ¨ï¼Œå¹…åº¦å° -->
  <view
    class="shidu"
    :style="{
      transform: `scale(${1 - scrollState / 100}) translateX(${-scrollState * 1.8}px)`,
      opacity: 1 - scrollState / 35,
    }"
  >
    <text class="iconfont shidu-icon">&#xe682;</text>
    <text class="info-text">65%</text>
  </view>

  <!-- ç©ºæ°”è´¨é‡å‘å·¦ç§»åŠ¨ï¼Œå¹…åº¦å¤§ -->
  <view
    class="air"
    :style="{
      transform: `scale(${1 - scrollState / 80}) translateX(${-scrollState * 3.5}px)`,
      opacity: 1 - scrollState / 30,
    }"
  >
    <text class="iconfont air-icon">&#xe60e;</text>
    <text class="info-text air-text">è‰¯å¥½</text>
  </view>
</view>  

```

å¯¹äºä¸å¤æ‚çš„ä½ç§»ï¼Œå¯ä»¥ç›´æ¥åœ¨è¡Œå†…æ ·å¼ä¸­è¿›è¡ŒåŠ å·¥ï¼š

1. ç¼©æ”¾éƒ¨åˆ†ï¼š`scale(${1 - scrollState / 80})`

```
// scrollState = 0 æ—¶ï¼š
scale(1 - 0/80) = scale(1)    // åŸå§‹å¤§å°

// scrollState = 40 æ—¶ï¼š
scale(1 - 40/80) = scale(0.5) // ç¼©å°åˆ°50%

// scrollState = 80 æ—¶ï¼š
scale(1 - 80/80) = scale(0)   // ç¼©å°åˆ°0ï¼ˆæ¶ˆå¤±ï¼ï¼‰

// scrollState = 100 æ—¶ï¼š
scale(1 - 100/80) = scale(-0.25) // è´Ÿå€¼ï¼Œå¯èƒ½äº§ç”Ÿåå‘æ•ˆæœ
```

**ç¼©æ”¾ç‰¹ç‚¹ï¼š**

- **åˆ†æ¯80**ï¼šæ§åˆ¶ç¼©æ”¾é€Ÿåº¦ï¼Œ80pxæ»šåŠ¨å°±ç¼©æ”¾åˆ°0
- **çº¿æ€§ç¼©å°**ï¼šæ¯æ»šåŠ¨1pxï¼Œç¼©å° 1/80 â‰ˆ 1.25%

2. å¹³ç§»éƒ¨åˆ†ï¼š`translateX(${scrollState * 3.5}px)`

```
// scrollState = 0 æ—¶ï¼š
translateX(0 * 3.5) = translateX(0px)    // åŸä½

// scrollState = 40 æ—¶ï¼š
translateX(40 * 3.5) = translateX(140px) // å‘å³140px

// scrollState = 100 æ—¶ï¼š
translateX(100 * 3.5) = translateX(350px) // å‘å³350px
```

**å¹³ç§»ç‰¹ç‚¹ï¼š**

- **ç³»æ•°3.5**ï¼šæ¯æ»šåŠ¨1pxï¼Œå‘å³ç§»åŠ¨3.5px
- **çº¿æ€§ç§»åŠ¨**ï¼šç§»åŠ¨è·ç¦»ä¸æ»šåŠ¨å€¼æˆæ­£æ¯”

3. é€æ˜åº¦ï¼š`opacity: 1 - scrollState / 30`

```
// scrollState = 0 æ—¶ï¼š
1 - 0/30 = 1.0      // å®Œå…¨ä¸é€æ˜

// scrollState = 10 æ—¶ï¼š
1 - 10/30 = 0.667   // çº¦67%é€æ˜åº¦

// scrollState = 20 æ—¶ï¼š
1 - 20/30 = 0.333   // çº¦33%é€æ˜åº¦

// scrollState = 30 æ—¶ï¼š
1 - 30/30 = 0       // å®Œå…¨é€æ˜

// scrollState > 30 æ—¶ï¼š
1 - 40/30 = -0.333  // è´Ÿå€¼ï¼Œä½†opacityä¼šé’³åˆ¶åœ¨0-1ä¹‹é—´
```

**é€æ˜åº¦ç‰¹ç‚¹ï¼š**

- **åˆ†æ¯30**ï¼šæ§åˆ¶æ·¡å‡ºé€Ÿåº¦ï¼Œ30pxæ»šåŠ¨å°±å®Œå…¨é€æ˜
- **å¿«é€Ÿæ¶ˆå¤±**ï¼šå…ƒç´ åœ¨ç›¸å¯¹è¾ƒå°çš„æ»šåŠ¨è·ç¦»å†…å°±å®Œå…¨æ·¡å‡º

:::
